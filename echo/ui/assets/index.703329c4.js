import{n as t,k as e,v as n,l as r}from"./vendor.9ff4bacf.js";import{b as o}from"./index.c35f5c23.js";import{d as i}from"./index.885e04a4.js";var s={},a={};Object.defineProperty(a,"__esModule",{value:!0});var c=a.getLocalStorage=a.getLocalStorageOrThrow=a.getCrypto=a.getCryptoOrThrow=a.getLocation=a.getLocationOrThrow=a.getNavigator=a.getNavigatorOrThrow=a.getDocument=a.getDocumentOrThrow=a.getFromWindowOrThrow=a.getFromWindow=void 0;function u(t){let e;return"undefined"!=typeof window&&void 0!==window[t]&&(e=window[t]),e}var l=a.getFromWindow=u;function h(t){const e=u(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}var d=a.getFromWindowOrThrow=h;var f=a.getDocumentOrThrow=function(){return h("document")};var p=a.getDocument=function(){return u("document")};var m=a.getNavigatorOrThrow=function(){return h("navigator")};var g=a.getNavigator=function(){return u("navigator")};var _=a.getLocationOrThrow=function(){return h("location")};var v=a.getLocation=function(){return u("location")};var w=a.getCryptoOrThrow=function(){return h("crypto")};var y=a.getCrypto=function(){return u("crypto")};var b=a.getLocalStorageOrThrow=function(){return h("localStorage")};c=a.getLocalStorage=function(){return u("localStorage")},Object.defineProperty(s,"__esModule",{value:!0});var M=s.getWindowMetadata=void 0;const x=a;M=s.getWindowMetadata=function(){let t,e;try{t=x.getDocumentOrThrow(),e=x.getLocationOrThrow()}catch(o){return null}function n(...e){const n=t.getElementsByTagName("meta");for(let t=0;t<n.length;t++){const r=n[t],o=["itemprop","property","name"].map((t=>r.getAttribute(t))).filter((t=>!!t&&e.includes(t)));if(o.length&&o){const t=r.getAttribute("content");if(t)return t}}return""}const r=function(){let e=n("name","og:site_name","og:title","twitter:title");return e||(e=t.title),e}();return{description:n("description","og:description","twitter:description","keywords"),url:e.origin,icons:function(){const n=t.getElementsByTagName("link"),r=[];for(let t=0;t<n.length;t++){const o=n[t],i=o.getAttribute("rel");if(i&&i.toLowerCase().indexOf("icon")>-1){const t=o.getAttribute("href");if(t)if(-1===t.toLowerCase().indexOf("https:")&&-1===t.toLowerCase().indexOf("http:")&&0!==t.indexOf("//")){let n=e.protocol+"//"+e.host;if(0===t.indexOf("/"))n+=t;else{const r=e.pathname.split("/");r.pop();n+=r.join("/")+"/"+t}r.push(n)}else if(0===t.indexOf("//")){const n=e.protocol+t;r.push(n)}else r.push(t)}}return r}(),name:r}};var k=function(t,e,n){this.name=t,this.version=e,this.os=n,this.type="browser"},C=function(t){this.version=t,this.type="node",this.name="node",this.os=process.platform},S=function(t,e,n,r){this.name=t,this.version=e,this.os=n,this.bot=r,this.type="bot-device"},E=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},I=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},T=/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,R=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],A=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function O(t){return t?N(t):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new I:"undefined"!=typeof navigator?N(navigator.userAgent):"undefined"!=typeof process&&process.version?new C(process.version.slice(1)):null}function N(t){var e=function(t){return""!==t&&R.reduce((function(e,n){var r=n[0],o=n[1];if(e)return e;var i=o.exec(t);return!!i&&[r,i]}),!1)}(t);if(!e)return null;var n=e[0],r=e[1];if("searchbot"===n)return new E;var o=r[1]&&r[1].split(/[._]/).slice(0,3);o?o.length<3&&(o=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r}(o,function(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}(3-o.length))):o=[];var i=o.join("."),s=function(t){for(var e=0,n=A.length;e<n;e++){var r=A[e],o=r[0];if(r[1].exec(t))return o}return null}(t),a=T.exec(t);return a&&a[1]?new S(n,i,s,a[1]):new k(n,i,s)}function B(t){return O(t)}function P(){const t=B();return t&&t.os?t.os:void 0}function L(){const t=P();return!!t&&t.toLowerCase().includes("android")}function q(){const t=P();return!!t&&(t.toLowerCase().includes("ios")||t.toLowerCase().includes("mac")&&navigator.maxTouchPoints>1)}function U(){return!!P()&&(L()||q())}function j(){const t=B();return!(!t||!t.name)&&"node"===t.name.toLowerCase()}function D(){return!j()&&!!J()}const W=l,F=d,z=f,H=p,$=m,J=g,Y=_,K=v,Z=w,V=y,Q=b,X=c;function G(){return M()}const tt=function(t){if("string"!=typeof t)throw new Error("Cannot safe json parse value of type "+typeof t);try{return JSON.parse(t)}catch(e){return t}},et=function(t){return"string"==typeof t?t:JSON.stringify(t)};function nt(t,e){const n=et(e),r=X();r&&r.setItem(t,n)}function rt(t){let e=null,n=null;const r=X();return r&&(n=r.getItem(t)),e=n?tt(n):n,e}function ot(t){const e=X();e&&e.removeItem(t)}function it(t,e){return t.filter((t=>t.name.toLowerCase().includes(e.toLowerCase())))[0]}const st="https://registry.walletconnect.org";function at(t){return st+"/logo/sm/"+t+".jpeg"}function ct(t,e="mobile"){return{name:t.name||"",shortName:t.metadata.shortName||"",color:t.metadata.colors.primary||"",logo:t.id?at(t.id):"",universalLink:t[e].universal||"",deepLink:t[e].native||""}}var ut=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",detectEnv:B,detectOS:P,isAndroid:L,isIOS:q,isMobile:U,isNode:j,isBrowser:D,getFromWindow:W,getFromWindowOrThrow:F,getDocumentOrThrow:z,getDocument:H,getNavigatorOrThrow:$,getNavigator:J,getLocationOrThrow:Y,getLocation:K,getCryptoOrThrow:Z,getCrypto:V,getLocalStorageOrThrow:Q,getLocalStorage:X,getClientMeta:G,safeJsonParse:tt,safeJsonStringify:et,setLocal:nt,getLocal:rt,removeLocal:ot,mobileLinkChoiceKey:"WALLETCONNECT_DEEPLINK_CHOICE",formatIOSMobile:function(t,e){const n=encodeURIComponent(t);return e.universalLink?`${e.universalLink}/wc?uri=${n}`:e.deepLink?`${e.deepLink}${e.deepLink.endsWith(":")?"//":"/"}wc?uri=${n}`:""},saveMobileLinkInfo:function(t){const e=t.href.split("?")[0];nt("WALLETCONNECT_DEEPLINK_CHOICE",Object.assign(Object.assign({},t),{href:e}))},getMobileRegistryEntry:it,getMobileLinkRegistry:function(t,e){let n=t;return e&&(n=e.map((e=>it(t,e))).filter(Boolean)),n},getWalletRegistryUrl:function(){return st+"/data/wallets.json"},getDappRegistryUrl:function(){return st+"/data/dapps.json"},getAppLogoUrl:at,formatMobileRegistryEntry:ct,formatMobileRegistry:function(t,e="mobile"){return Object.values(t).filter((t=>!!t[e].universal||!!t[e].native)).map((t=>ct(t,e)))}});const lt=["session_request","session_update","exchange_key","connect","disconnect","display_uri","modal_closed","transport_open","transport_close","transport_error"],ht=["eth_sendTransaction","eth_signTransaction","eth_sign","eth_signTypedData","eth_signTypedData_v1","eth_signTypedData_v2","eth_signTypedData_v3","eth_signTypedData_v4","personal_sign"],dt={1:"mainnet",3:"ropsten",4:"rinkeby",5:"goerli",42:"kovan"};var ft={exports:{}};!function(e,n){function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function o(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}function i(t,e,n){if(i.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(n=e,e=10),this._init(t||0,e||10,n||"be"))}var s;"object"==typeof e?e.exports=i:n.BN=i,i.BN=i,i.wordSize=26;try{s=t.Buffer}catch(k){}function a(t,e,n){for(var r=0,o=Math.min(t.length,n),i=e;i<o;i++){var s=t.charCodeAt(i)-48;r<<=4,r|=s>=49&&s<=54?s-49+10:s>=17&&s<=22?s-17+10:15&s}return r}function c(t,e,n,r){for(var o=0,i=Math.min(t.length,n),s=e;s<i;s++){var a=t.charCodeAt(s)-48;o*=r,o+=a>=49?a-49+10:a>=17?a-17+10:a}return o}i.isBN=function(t){return t instanceof i||null!==t&&"object"==typeof t&&t.constructor.wordSize===i.wordSize&&Array.isArray(t.words)},i.max=function(t,e){return t.cmp(e)>0?t:e},i.min=function(t,e){return t.cmp(e)<0?t:e},i.prototype._init=function(t,e,n){if("number"==typeof t)return this._initNumber(t,e,n);if("object"==typeof t)return this._initArray(t,e,n);"hex"===e&&(e=16),r(e===(0|e)&&e>=2&&e<=36);var o=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&o++,16===e?this._parseHex(t,o):this._parseBase(t,e,o),"-"===t[0]&&(this.negative=1),this.strip(),"le"===n&&this._initArray(this.toArray(),e,n)},i.prototype._initNumber=function(t,e,n){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),e,n)},i.prototype._initArray=function(t,e,n){if(r("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var o=0;o<this.length;o++)this.words[o]=0;var i,s,a=0;if("be"===n)for(o=t.length-1,i=0;o>=0;o-=3)s=t[o]|t[o-1]<<8|t[o-2]<<16,this.words[i]|=s<<a&67108863,this.words[i+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,i++);else if("le"===n)for(o=0,i=0;o<t.length;o+=3)s=t[o]|t[o+1]<<8|t[o+2]<<16,this.words[i]|=s<<a&67108863,this.words[i+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,i++);return this.strip()},i.prototype._parseHex=function(t,e){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var r,o,i=0;for(n=t.length-6,r=0;n>=e;n-=6)o=a(t,n,n+6),this.words[r]|=o<<i&67108863,this.words[r+1]|=o>>>26-i&4194303,(i+=24)>=26&&(i-=26,r++);n+6!==e&&(o=a(t,e,n+6),this.words[r]|=o<<i&67108863,this.words[r+1]|=o>>>26-i&4194303),this.strip()},i.prototype._parseBase=function(t,e,n){this.words=[0],this.length=1;for(var r=0,o=1;o<=67108863;o*=e)r++;r--,o=o/e|0;for(var i=t.length-n,s=i%r,a=Math.min(i,i-s)+n,u=0,l=n;l<a;l+=r)u=c(t,l,l+r,e),this.imuln(o),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==s){var h=1;for(u=c(t,l,t.length,e),l=0;l<s;l++)h*=e;this.imuln(h),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}},i.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},i.prototype.clone=function(){var t=new i(null);return this.copy(t),t},i.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},i.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],h=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(t,e,n){n.negative=e.negative^t.negative;var r=t.length+e.length|0;n.length=r,r=r-1|0;var o=0|t.words[0],i=0|e.words[0],s=o*i,a=67108863&s,c=s/67108864|0;n.words[0]=a;for(var u=1;u<r;u++){for(var l=c>>>26,h=67108863&c,d=Math.min(u,e.length-1),f=Math.max(0,u-t.length+1);f<=d;f++){var p=u-f|0;l+=(s=(o=0|t.words[p])*(i=0|e.words[f])+h)/67108864|0,h=67108863&s}n.words[u]=0|h,c=0|l}return 0!==c?n.words[u]=0|c:n.length--,n.strip()}i.prototype.toString=function(t,e){var n;if(e=0|e||1,16===(t=t||10)||"hex"===t){n="";for(var o=0,i=0,s=0;s<this.length;s++){var a=this.words[s],c=(16777215&(a<<o|i)).toString(16);n=0!=(i=a>>>24-o&16777215)||s!==this.length-1?u[6-c.length]+c+n:c+n,(o+=2)>=26&&(o-=26,s--)}for(0!==i&&(n=i.toString(16)+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(t===(0|t)&&t>=2&&t<=36){var d=l[t],f=h[t];n="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(f).toString(t);n=(p=p.idivn(f)).isZero()?m+n:u[d-m.length]+m+n}for(this.isZero()&&(n="0"+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(t,e){return r(void 0!==s),this.toArrayLike(s,t,e)},i.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},i.prototype.toArrayLike=function(t,e,n){var o=this.byteLength(),i=n||Math.max(1,o);r(o<=i,"byte array longer than desired length"),r(i>0,"Requested array length <= 0"),this.strip();var s,a,c="le"===e,u=new t(i),l=this.clone();if(c){for(a=0;!l.isZero();a++)s=l.andln(255),l.iushrn(8),u[a]=s;for(;a<i;a++)u[a]=0}else{for(a=0;a<i-o;a++)u[a]=0;for(a=0;!l.isZero();a++)s=l.andln(255),l.iushrn(8),u[i-a-1]=s}return u},Math.clz32?i.prototype._countBits=function(t){return 32-Math.clz32(t)}:i.prototype._countBits=function(t){var e=t,n=0;return e>=4096&&(n+=13,e>>>=13),e>=64&&(n+=7,e>>>=7),e>=8&&(n+=4,e>>>=4),e>=2&&(n+=2,e>>>=2),n+e},i.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,n=0;return 0==(8191&e)&&(n+=13,e>>>=13),0==(127&e)&&(n+=7,e>>>=7),0==(15&e)&&(n+=4,e>>>=4),0==(3&e)&&(n+=2,e>>>=2),0==(1&e)&&n++,n},i.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var n=this._zeroBits(this.words[e]);if(t+=n,26!==n)break}return t},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},i.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return 0!==this.negative},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},i.prototype.ior=function(t){return r(0==(this.negative|t.negative)),this.iuor(t)},i.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},i.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},i.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var n=0;n<e.length;n++)this.words[n]=this.words[n]&t.words[n];return this.length=e.length,this.strip()},i.prototype.iand=function(t){return r(0==(this.negative|t.negative)),this.iuand(t)},i.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},i.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},i.prototype.iuxor=function(t){var e,n;this.length>t.length?(e=this,n=t):(e=t,n=this);for(var r=0;r<n.length;r++)this.words[r]=e.words[r]^n.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this.strip()},i.prototype.ixor=function(t){return r(0==(this.negative|t.negative)),this.iuxor(t)},i.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},i.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},i.prototype.inotn=function(t){r("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),n=t%26;this._expand(e),n>0&&e--;for(var o=0;o<e;o++)this.words[o]=67108863&~this.words[o];return n>0&&(this.words[o]=~this.words[o]&67108863>>26-n),this.strip()},i.prototype.notn=function(t){return this.clone().inotn(t)},i.prototype.setn=function(t,e){r("number"==typeof t&&t>=0);var n=t/26|0,o=t%26;return this._expand(n+1),this.words[n]=e?this.words[n]|1<<o:this.words[n]&~(1<<o),this.strip()},i.prototype.iadd=function(t){var e,n,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(n=this,r=t):(n=t,r=this);for(var o=0,i=0;i<r.length;i++)e=(0|n.words[i])+(0|r.words[i])+o,this.words[i]=67108863&e,o=e>>>26;for(;0!==o&&i<n.length;i++)e=(0|n.words[i])+o,this.words[i]=67108863&e,o=e>>>26;if(this.length=n.length,0!==o)this.words[this.length]=o,this.length++;else if(n!==this)for(;i<n.length;i++)this.words[i]=n.words[i];return this},i.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},i.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var n,r,o=this.cmp(t);if(0===o)return this.negative=0,this.length=1,this.words[0]=0,this;o>0?(n=this,r=t):(n=t,r=this);for(var i=0,s=0;s<r.length;s++)i=(e=(0|n.words[s])-(0|r.words[s])+i)>>26,this.words[s]=67108863&e;for(;0!==i&&s<n.length;s++)i=(e=(0|n.words[s])+i)>>26,this.words[s]=67108863&e;if(0===i&&s<n.length&&n!==this)for(;s<n.length;s++)this.words[s]=n.words[s];return this.length=Math.max(this.length,s),n!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(t){return this.clone().isub(t)};var f=function(t,e,n){var r,o,i,s=t.words,a=e.words,c=n.words,u=0,l=0|s[0],h=8191&l,d=l>>>13,f=0|s[1],p=8191&f,m=f>>>13,g=0|s[2],_=8191&g,v=g>>>13,w=0|s[3],y=8191&w,b=w>>>13,M=0|s[4],x=8191&M,k=M>>>13,C=0|s[5],S=8191&C,E=C>>>13,I=0|s[6],T=8191&I,R=I>>>13,A=0|s[7],O=8191&A,N=A>>>13,B=0|s[8],P=8191&B,L=B>>>13,q=0|s[9],U=8191&q,j=q>>>13,D=0|a[0],W=8191&D,F=D>>>13,z=0|a[1],H=8191&z,$=z>>>13,J=0|a[2],Y=8191&J,K=J>>>13,Z=0|a[3],V=8191&Z,Q=Z>>>13,X=0|a[4],G=8191&X,tt=X>>>13,et=0|a[5],nt=8191&et,rt=et>>>13,ot=0|a[6],it=8191&ot,st=ot>>>13,at=0|a[7],ct=8191&at,ut=at>>>13,lt=0|a[8],ht=8191&lt,dt=lt>>>13,ft=0|a[9],pt=8191&ft,mt=ft>>>13;n.negative=t.negative^e.negative,n.length=19;var gt=(u+(r=Math.imul(h,W))|0)+((8191&(o=(o=Math.imul(h,F))+Math.imul(d,W)|0))<<13)|0;u=((i=Math.imul(d,F))+(o>>>13)|0)+(gt>>>26)|0,gt&=67108863,r=Math.imul(p,W),o=(o=Math.imul(p,F))+Math.imul(m,W)|0,i=Math.imul(m,F);var _t=(u+(r=r+Math.imul(h,H)|0)|0)+((8191&(o=(o=o+Math.imul(h,$)|0)+Math.imul(d,H)|0))<<13)|0;u=((i=i+Math.imul(d,$)|0)+(o>>>13)|0)+(_t>>>26)|0,_t&=67108863,r=Math.imul(_,W),o=(o=Math.imul(_,F))+Math.imul(v,W)|0,i=Math.imul(v,F),r=r+Math.imul(p,H)|0,o=(o=o+Math.imul(p,$)|0)+Math.imul(m,H)|0,i=i+Math.imul(m,$)|0;var vt=(u+(r=r+Math.imul(h,Y)|0)|0)+((8191&(o=(o=o+Math.imul(h,K)|0)+Math.imul(d,Y)|0))<<13)|0;u=((i=i+Math.imul(d,K)|0)+(o>>>13)|0)+(vt>>>26)|0,vt&=67108863,r=Math.imul(y,W),o=(o=Math.imul(y,F))+Math.imul(b,W)|0,i=Math.imul(b,F),r=r+Math.imul(_,H)|0,o=(o=o+Math.imul(_,$)|0)+Math.imul(v,H)|0,i=i+Math.imul(v,$)|0,r=r+Math.imul(p,Y)|0,o=(o=o+Math.imul(p,K)|0)+Math.imul(m,Y)|0,i=i+Math.imul(m,K)|0;var wt=(u+(r=r+Math.imul(h,V)|0)|0)+((8191&(o=(o=o+Math.imul(h,Q)|0)+Math.imul(d,V)|0))<<13)|0;u=((i=i+Math.imul(d,Q)|0)+(o>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(x,W),o=(o=Math.imul(x,F))+Math.imul(k,W)|0,i=Math.imul(k,F),r=r+Math.imul(y,H)|0,o=(o=o+Math.imul(y,$)|0)+Math.imul(b,H)|0,i=i+Math.imul(b,$)|0,r=r+Math.imul(_,Y)|0,o=(o=o+Math.imul(_,K)|0)+Math.imul(v,Y)|0,i=i+Math.imul(v,K)|0,r=r+Math.imul(p,V)|0,o=(o=o+Math.imul(p,Q)|0)+Math.imul(m,V)|0,i=i+Math.imul(m,Q)|0;var yt=(u+(r=r+Math.imul(h,G)|0)|0)+((8191&(o=(o=o+Math.imul(h,tt)|0)+Math.imul(d,G)|0))<<13)|0;u=((i=i+Math.imul(d,tt)|0)+(o>>>13)|0)+(yt>>>26)|0,yt&=67108863,r=Math.imul(S,W),o=(o=Math.imul(S,F))+Math.imul(E,W)|0,i=Math.imul(E,F),r=r+Math.imul(x,H)|0,o=(o=o+Math.imul(x,$)|0)+Math.imul(k,H)|0,i=i+Math.imul(k,$)|0,r=r+Math.imul(y,Y)|0,o=(o=o+Math.imul(y,K)|0)+Math.imul(b,Y)|0,i=i+Math.imul(b,K)|0,r=r+Math.imul(_,V)|0,o=(o=o+Math.imul(_,Q)|0)+Math.imul(v,V)|0,i=i+Math.imul(v,Q)|0,r=r+Math.imul(p,G)|0,o=(o=o+Math.imul(p,tt)|0)+Math.imul(m,G)|0,i=i+Math.imul(m,tt)|0;var bt=(u+(r=r+Math.imul(h,nt)|0)|0)+((8191&(o=(o=o+Math.imul(h,rt)|0)+Math.imul(d,nt)|0))<<13)|0;u=((i=i+Math.imul(d,rt)|0)+(o>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(T,W),o=(o=Math.imul(T,F))+Math.imul(R,W)|0,i=Math.imul(R,F),r=r+Math.imul(S,H)|0,o=(o=o+Math.imul(S,$)|0)+Math.imul(E,H)|0,i=i+Math.imul(E,$)|0,r=r+Math.imul(x,Y)|0,o=(o=o+Math.imul(x,K)|0)+Math.imul(k,Y)|0,i=i+Math.imul(k,K)|0,r=r+Math.imul(y,V)|0,o=(o=o+Math.imul(y,Q)|0)+Math.imul(b,V)|0,i=i+Math.imul(b,Q)|0,r=r+Math.imul(_,G)|0,o=(o=o+Math.imul(_,tt)|0)+Math.imul(v,G)|0,i=i+Math.imul(v,tt)|0,r=r+Math.imul(p,nt)|0,o=(o=o+Math.imul(p,rt)|0)+Math.imul(m,nt)|0,i=i+Math.imul(m,rt)|0;var Mt=(u+(r=r+Math.imul(h,it)|0)|0)+((8191&(o=(o=o+Math.imul(h,st)|0)+Math.imul(d,it)|0))<<13)|0;u=((i=i+Math.imul(d,st)|0)+(o>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,r=Math.imul(O,W),o=(o=Math.imul(O,F))+Math.imul(N,W)|0,i=Math.imul(N,F),r=r+Math.imul(T,H)|0,o=(o=o+Math.imul(T,$)|0)+Math.imul(R,H)|0,i=i+Math.imul(R,$)|0,r=r+Math.imul(S,Y)|0,o=(o=o+Math.imul(S,K)|0)+Math.imul(E,Y)|0,i=i+Math.imul(E,K)|0,r=r+Math.imul(x,V)|0,o=(o=o+Math.imul(x,Q)|0)+Math.imul(k,V)|0,i=i+Math.imul(k,Q)|0,r=r+Math.imul(y,G)|0,o=(o=o+Math.imul(y,tt)|0)+Math.imul(b,G)|0,i=i+Math.imul(b,tt)|0,r=r+Math.imul(_,nt)|0,o=(o=o+Math.imul(_,rt)|0)+Math.imul(v,nt)|0,i=i+Math.imul(v,rt)|0,r=r+Math.imul(p,it)|0,o=(o=o+Math.imul(p,st)|0)+Math.imul(m,it)|0,i=i+Math.imul(m,st)|0;var xt=(u+(r=r+Math.imul(h,ct)|0)|0)+((8191&(o=(o=o+Math.imul(h,ut)|0)+Math.imul(d,ct)|0))<<13)|0;u=((i=i+Math.imul(d,ut)|0)+(o>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(P,W),o=(o=Math.imul(P,F))+Math.imul(L,W)|0,i=Math.imul(L,F),r=r+Math.imul(O,H)|0,o=(o=o+Math.imul(O,$)|0)+Math.imul(N,H)|0,i=i+Math.imul(N,$)|0,r=r+Math.imul(T,Y)|0,o=(o=o+Math.imul(T,K)|0)+Math.imul(R,Y)|0,i=i+Math.imul(R,K)|0,r=r+Math.imul(S,V)|0,o=(o=o+Math.imul(S,Q)|0)+Math.imul(E,V)|0,i=i+Math.imul(E,Q)|0,r=r+Math.imul(x,G)|0,o=(o=o+Math.imul(x,tt)|0)+Math.imul(k,G)|0,i=i+Math.imul(k,tt)|0,r=r+Math.imul(y,nt)|0,o=(o=o+Math.imul(y,rt)|0)+Math.imul(b,nt)|0,i=i+Math.imul(b,rt)|0,r=r+Math.imul(_,it)|0,o=(o=o+Math.imul(_,st)|0)+Math.imul(v,it)|0,i=i+Math.imul(v,st)|0,r=r+Math.imul(p,ct)|0,o=(o=o+Math.imul(p,ut)|0)+Math.imul(m,ct)|0,i=i+Math.imul(m,ut)|0;var kt=(u+(r=r+Math.imul(h,ht)|0)|0)+((8191&(o=(o=o+Math.imul(h,dt)|0)+Math.imul(d,ht)|0))<<13)|0;u=((i=i+Math.imul(d,dt)|0)+(o>>>13)|0)+(kt>>>26)|0,kt&=67108863,r=Math.imul(U,W),o=(o=Math.imul(U,F))+Math.imul(j,W)|0,i=Math.imul(j,F),r=r+Math.imul(P,H)|0,o=(o=o+Math.imul(P,$)|0)+Math.imul(L,H)|0,i=i+Math.imul(L,$)|0,r=r+Math.imul(O,Y)|0,o=(o=o+Math.imul(O,K)|0)+Math.imul(N,Y)|0,i=i+Math.imul(N,K)|0,r=r+Math.imul(T,V)|0,o=(o=o+Math.imul(T,Q)|0)+Math.imul(R,V)|0,i=i+Math.imul(R,Q)|0,r=r+Math.imul(S,G)|0,o=(o=o+Math.imul(S,tt)|0)+Math.imul(E,G)|0,i=i+Math.imul(E,tt)|0,r=r+Math.imul(x,nt)|0,o=(o=o+Math.imul(x,rt)|0)+Math.imul(k,nt)|0,i=i+Math.imul(k,rt)|0,r=r+Math.imul(y,it)|0,o=(o=o+Math.imul(y,st)|0)+Math.imul(b,it)|0,i=i+Math.imul(b,st)|0,r=r+Math.imul(_,ct)|0,o=(o=o+Math.imul(_,ut)|0)+Math.imul(v,ct)|0,i=i+Math.imul(v,ut)|0,r=r+Math.imul(p,ht)|0,o=(o=o+Math.imul(p,dt)|0)+Math.imul(m,ht)|0,i=i+Math.imul(m,dt)|0;var Ct=(u+(r=r+Math.imul(h,pt)|0)|0)+((8191&(o=(o=o+Math.imul(h,mt)|0)+Math.imul(d,pt)|0))<<13)|0;u=((i=i+Math.imul(d,mt)|0)+(o>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,r=Math.imul(U,H),o=(o=Math.imul(U,$))+Math.imul(j,H)|0,i=Math.imul(j,$),r=r+Math.imul(P,Y)|0,o=(o=o+Math.imul(P,K)|0)+Math.imul(L,Y)|0,i=i+Math.imul(L,K)|0,r=r+Math.imul(O,V)|0,o=(o=o+Math.imul(O,Q)|0)+Math.imul(N,V)|0,i=i+Math.imul(N,Q)|0,r=r+Math.imul(T,G)|0,o=(o=o+Math.imul(T,tt)|0)+Math.imul(R,G)|0,i=i+Math.imul(R,tt)|0,r=r+Math.imul(S,nt)|0,o=(o=o+Math.imul(S,rt)|0)+Math.imul(E,nt)|0,i=i+Math.imul(E,rt)|0,r=r+Math.imul(x,it)|0,o=(o=o+Math.imul(x,st)|0)+Math.imul(k,it)|0,i=i+Math.imul(k,st)|0,r=r+Math.imul(y,ct)|0,o=(o=o+Math.imul(y,ut)|0)+Math.imul(b,ct)|0,i=i+Math.imul(b,ut)|0,r=r+Math.imul(_,ht)|0,o=(o=o+Math.imul(_,dt)|0)+Math.imul(v,ht)|0,i=i+Math.imul(v,dt)|0;var St=(u+(r=r+Math.imul(p,pt)|0)|0)+((8191&(o=(o=o+Math.imul(p,mt)|0)+Math.imul(m,pt)|0))<<13)|0;u=((i=i+Math.imul(m,mt)|0)+(o>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(U,Y),o=(o=Math.imul(U,K))+Math.imul(j,Y)|0,i=Math.imul(j,K),r=r+Math.imul(P,V)|0,o=(o=o+Math.imul(P,Q)|0)+Math.imul(L,V)|0,i=i+Math.imul(L,Q)|0,r=r+Math.imul(O,G)|0,o=(o=o+Math.imul(O,tt)|0)+Math.imul(N,G)|0,i=i+Math.imul(N,tt)|0,r=r+Math.imul(T,nt)|0,o=(o=o+Math.imul(T,rt)|0)+Math.imul(R,nt)|0,i=i+Math.imul(R,rt)|0,r=r+Math.imul(S,it)|0,o=(o=o+Math.imul(S,st)|0)+Math.imul(E,it)|0,i=i+Math.imul(E,st)|0,r=r+Math.imul(x,ct)|0,o=(o=o+Math.imul(x,ut)|0)+Math.imul(k,ct)|0,i=i+Math.imul(k,ut)|0,r=r+Math.imul(y,ht)|0,o=(o=o+Math.imul(y,dt)|0)+Math.imul(b,ht)|0,i=i+Math.imul(b,dt)|0;var Et=(u+(r=r+Math.imul(_,pt)|0)|0)+((8191&(o=(o=o+Math.imul(_,mt)|0)+Math.imul(v,pt)|0))<<13)|0;u=((i=i+Math.imul(v,mt)|0)+(o>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(U,V),o=(o=Math.imul(U,Q))+Math.imul(j,V)|0,i=Math.imul(j,Q),r=r+Math.imul(P,G)|0,o=(o=o+Math.imul(P,tt)|0)+Math.imul(L,G)|0,i=i+Math.imul(L,tt)|0,r=r+Math.imul(O,nt)|0,o=(o=o+Math.imul(O,rt)|0)+Math.imul(N,nt)|0,i=i+Math.imul(N,rt)|0,r=r+Math.imul(T,it)|0,o=(o=o+Math.imul(T,st)|0)+Math.imul(R,it)|0,i=i+Math.imul(R,st)|0,r=r+Math.imul(S,ct)|0,o=(o=o+Math.imul(S,ut)|0)+Math.imul(E,ct)|0,i=i+Math.imul(E,ut)|0,r=r+Math.imul(x,ht)|0,o=(o=o+Math.imul(x,dt)|0)+Math.imul(k,ht)|0,i=i+Math.imul(k,dt)|0;var It=(u+(r=r+Math.imul(y,pt)|0)|0)+((8191&(o=(o=o+Math.imul(y,mt)|0)+Math.imul(b,pt)|0))<<13)|0;u=((i=i+Math.imul(b,mt)|0)+(o>>>13)|0)+(It>>>26)|0,It&=67108863,r=Math.imul(U,G),o=(o=Math.imul(U,tt))+Math.imul(j,G)|0,i=Math.imul(j,tt),r=r+Math.imul(P,nt)|0,o=(o=o+Math.imul(P,rt)|0)+Math.imul(L,nt)|0,i=i+Math.imul(L,rt)|0,r=r+Math.imul(O,it)|0,o=(o=o+Math.imul(O,st)|0)+Math.imul(N,it)|0,i=i+Math.imul(N,st)|0,r=r+Math.imul(T,ct)|0,o=(o=o+Math.imul(T,ut)|0)+Math.imul(R,ct)|0,i=i+Math.imul(R,ut)|0,r=r+Math.imul(S,ht)|0,o=(o=o+Math.imul(S,dt)|0)+Math.imul(E,ht)|0,i=i+Math.imul(E,dt)|0;var Tt=(u+(r=r+Math.imul(x,pt)|0)|0)+((8191&(o=(o=o+Math.imul(x,mt)|0)+Math.imul(k,pt)|0))<<13)|0;u=((i=i+Math.imul(k,mt)|0)+(o>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(U,nt),o=(o=Math.imul(U,rt))+Math.imul(j,nt)|0,i=Math.imul(j,rt),r=r+Math.imul(P,it)|0,o=(o=o+Math.imul(P,st)|0)+Math.imul(L,it)|0,i=i+Math.imul(L,st)|0,r=r+Math.imul(O,ct)|0,o=(o=o+Math.imul(O,ut)|0)+Math.imul(N,ct)|0,i=i+Math.imul(N,ut)|0,r=r+Math.imul(T,ht)|0,o=(o=o+Math.imul(T,dt)|0)+Math.imul(R,ht)|0,i=i+Math.imul(R,dt)|0;var Rt=(u+(r=r+Math.imul(S,pt)|0)|0)+((8191&(o=(o=o+Math.imul(S,mt)|0)+Math.imul(E,pt)|0))<<13)|0;u=((i=i+Math.imul(E,mt)|0)+(o>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,r=Math.imul(U,it),o=(o=Math.imul(U,st))+Math.imul(j,it)|0,i=Math.imul(j,st),r=r+Math.imul(P,ct)|0,o=(o=o+Math.imul(P,ut)|0)+Math.imul(L,ct)|0,i=i+Math.imul(L,ut)|0,r=r+Math.imul(O,ht)|0,o=(o=o+Math.imul(O,dt)|0)+Math.imul(N,ht)|0,i=i+Math.imul(N,dt)|0;var At=(u+(r=r+Math.imul(T,pt)|0)|0)+((8191&(o=(o=o+Math.imul(T,mt)|0)+Math.imul(R,pt)|0))<<13)|0;u=((i=i+Math.imul(R,mt)|0)+(o>>>13)|0)+(At>>>26)|0,At&=67108863,r=Math.imul(U,ct),o=(o=Math.imul(U,ut))+Math.imul(j,ct)|0,i=Math.imul(j,ut),r=r+Math.imul(P,ht)|0,o=(o=o+Math.imul(P,dt)|0)+Math.imul(L,ht)|0,i=i+Math.imul(L,dt)|0;var Ot=(u+(r=r+Math.imul(O,pt)|0)|0)+((8191&(o=(o=o+Math.imul(O,mt)|0)+Math.imul(N,pt)|0))<<13)|0;u=((i=i+Math.imul(N,mt)|0)+(o>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,r=Math.imul(U,ht),o=(o=Math.imul(U,dt))+Math.imul(j,ht)|0,i=Math.imul(j,dt);var Nt=(u+(r=r+Math.imul(P,pt)|0)|0)+((8191&(o=(o=o+Math.imul(P,mt)|0)+Math.imul(L,pt)|0))<<13)|0;u=((i=i+Math.imul(L,mt)|0)+(o>>>13)|0)+(Nt>>>26)|0,Nt&=67108863;var Bt=(u+(r=Math.imul(U,pt))|0)+((8191&(o=(o=Math.imul(U,mt))+Math.imul(j,pt)|0))<<13)|0;return u=((i=Math.imul(j,mt))+(o>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,c[0]=gt,c[1]=_t,c[2]=vt,c[3]=wt,c[4]=yt,c[5]=bt,c[6]=Mt,c[7]=xt,c[8]=kt,c[9]=Ct,c[10]=St,c[11]=Et,c[12]=It,c[13]=Tt,c[14]=Rt,c[15]=At,c[16]=Ot,c[17]=Nt,c[18]=Bt,0!==u&&(c[19]=u,n.length++),n};function p(t,e,n){return(new m).mulp(t,e,n)}function m(t,e){this.x=t,this.y=e}Math.imul||(f=d),i.prototype.mulTo=function(t,e){var n=this.length+t.length;return 10===this.length&&10===t.length?f(this,t,e):n<63?d(this,t,e):n<1024?function(t,e,n){n.negative=e.negative^t.negative,n.length=t.length+e.length;for(var r=0,o=0,i=0;i<n.length-1;i++){var s=o;o=0;for(var a=67108863&r,c=Math.min(i,e.length-1),u=Math.max(0,i-t.length+1);u<=c;u++){var l=i-u,h=(0|t.words[l])*(0|e.words[u]),d=67108863&h;a=67108863&(d=d+a|0),o+=(s=(s=s+(h/67108864|0)|0)+(d>>>26)|0)>>>26,s&=67108863}n.words[i]=a,r=s,s=o}return 0!==r?n.words[i]=r:n.length--,n.strip()}(this,t,e):p(this,t,e)},m.prototype.makeRBT=function(t){for(var e=new Array(t),n=i.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,n,t);return e},m.prototype.revBin=function(t,e,n){if(0===t||t===n-1)return t;for(var r=0,o=0;o<e;o++)r|=(1&t)<<e-o-1,t>>=1;return r},m.prototype.permute=function(t,e,n,r,o,i){for(var s=0;s<i;s++)r[s]=e[t[s]],o[s]=n[t[s]]},m.prototype.transform=function(t,e,n,r,o,i){this.permute(i,t,e,n,r,o);for(var s=1;s<o;s<<=1)for(var a=s<<1,c=Math.cos(2*Math.PI/a),u=Math.sin(2*Math.PI/a),l=0;l<o;l+=a)for(var h=c,d=u,f=0;f<s;f++){var p=n[l+f],m=r[l+f],g=n[l+f+s],_=r[l+f+s],v=h*g-d*_;_=h*_+d*g,g=v,n[l+f]=p+g,r[l+f]=m+_,n[l+f+s]=p-g,r[l+f+s]=m-_,f!==a&&(v=c*h-u*d,d=c*d+u*h,h=v)}},m.prototype.guessLen13b=function(t,e){var n=1|Math.max(e,t),r=1&n,o=0;for(n=n/2|0;n;n>>>=1)o++;return 1<<o+1+r},m.prototype.conjugate=function(t,e,n){if(!(n<=1))for(var r=0;r<n/2;r++){var o=t[r];t[r]=t[n-r-1],t[n-r-1]=o,o=e[r],e[r]=-e[n-r-1],e[n-r-1]=-o}},m.prototype.normalize13b=function(t,e){for(var n=0,r=0;r<e/2;r++){var o=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+n;t[r]=67108863&o,n=o<67108864?0:o/67108864|0}return t},m.prototype.convert13b=function(t,e,n,o){for(var i=0,s=0;s<e;s++)i+=0|t[s],n[2*s]=8191&i,i>>>=13,n[2*s+1]=8191&i,i>>>=13;for(s=2*e;s<o;++s)n[s]=0;r(0===i),r(0==(-8192&i))},m.prototype.stub=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=0;return e},m.prototype.mulp=function(t,e,n){var r=2*this.guessLen13b(t.length,e.length),o=this.makeRBT(r),i=this.stub(r),s=new Array(r),a=new Array(r),c=new Array(r),u=new Array(r),l=new Array(r),h=new Array(r),d=n.words;d.length=r,this.convert13b(t.words,t.length,s,r),this.convert13b(e.words,e.length,u,r),this.transform(s,i,a,c,r,o),this.transform(u,i,l,h,r,o);for(var f=0;f<r;f++){var p=a[f]*l[f]-c[f]*h[f];c[f]=a[f]*h[f]+c[f]*l[f],a[f]=p}return this.conjugate(a,c,r),this.transform(a,c,d,i,r,o),this.conjugate(d,i,r),this.normalize13b(d,r),n.negative=t.negative^e.negative,n.length=t.length+e.length,n.strip()},i.prototype.mul=function(t){var e=new i(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},i.prototype.mulf=function(t){var e=new i(null);return e.words=new Array(this.length+t.length),p(this,t,e)},i.prototype.imul=function(t){return this.clone().mulTo(t,this)},i.prototype.imuln=function(t){r("number"==typeof t),r(t<67108864);for(var e=0,n=0;n<this.length;n++){var o=(0|this.words[n])*t,i=(67108863&o)+(67108863&e);e>>=26,e+=o/67108864|0,e+=i>>>26,this.words[n]=67108863&i}return 0!==e&&(this.words[n]=e,this.length++),this},i.prototype.muln=function(t){return this.clone().imuln(t)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),n=0;n<e.length;n++){var r=n/26|0,o=n%26;e[n]=(t.words[r]&1<<o)>>>o}return e}(t);if(0===e.length)return new i(1);for(var n=this,r=0;r<e.length&&0===e[r];r++,n=n.sqr());if(++r<e.length)for(var o=n.sqr();r<e.length;r++,o=o.sqr())0!==e[r]&&(n=n.mul(o));return n},i.prototype.iushln=function(t){r("number"==typeof t&&t>=0);var e,n=t%26,o=(t-n)/26,i=67108863>>>26-n<<26-n;if(0!==n){var s=0;for(e=0;e<this.length;e++){var a=this.words[e]&i,c=(0|this.words[e])-a<<n;this.words[e]=c|s,s=a>>>26-n}s&&(this.words[e]=s,this.length++)}if(0!==o){for(e=this.length-1;e>=0;e--)this.words[e+o]=this.words[e];for(e=0;e<o;e++)this.words[e]=0;this.length+=o}return this.strip()},i.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},i.prototype.iushrn=function(t,e,n){var o;r("number"==typeof t&&t>=0),o=e?(e-e%26)/26:0;var i=t%26,s=Math.min((t-i)/26,this.length),a=67108863^67108863>>>i<<i,c=n;if(o-=s,o=Math.max(0,o),c){for(var u=0;u<s;u++)c.words[u]=this.words[u];c.length=s}if(0===s);else if(this.length>s)for(this.length-=s,u=0;u<this.length;u++)this.words[u]=this.words[u+s];else this.words[0]=0,this.length=1;var l=0;for(u=this.length-1;u>=0&&(0!==l||u>=o);u--){var h=0|this.words[u];this.words[u]=l<<26-i|h>>>i,l=h&a}return c&&0!==l&&(c.words[c.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(t,e,n){return r(0===this.negative),this.iushrn(t,e,n)},i.prototype.shln=function(t){return this.clone().ishln(t)},i.prototype.ushln=function(t){return this.clone().iushln(t)},i.prototype.shrn=function(t){return this.clone().ishrn(t)},i.prototype.ushrn=function(t){return this.clone().iushrn(t)},i.prototype.testn=function(t){r("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26,o=1<<e;return!(this.length<=n||!(this.words[n]&o))},i.prototype.imaskn=function(t){r("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==e&&n++,this.length=Math.min(n,this.length),0!==e){var o=67108863^67108863>>>e<<e;this.words[this.length-1]&=o}return this.strip()},i.prototype.maskn=function(t){return this.clone().imaskn(t)},i.prototype.iaddn=function(t){return r("number"==typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},i.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},i.prototype.isubn=function(t){if(r("number"==typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},i.prototype.addn=function(t){return this.clone().iaddn(t)},i.prototype.subn=function(t){return this.clone().isubn(t)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(t,e,n){var o,i,s=t.length+n;this._expand(s);var a=0;for(o=0;o<t.length;o++){i=(0|this.words[o+n])+a;var c=(0|t.words[o])*e;a=((i-=67108863&c)>>26)-(c/67108864|0),this.words[o+n]=67108863&i}for(;o<this.length-n;o++)a=(i=(0|this.words[o+n])+a)>>26,this.words[o+n]=67108863&i;if(0===a)return this.strip();for(r(-1===a),a=0,o=0;o<this.length;o++)a=(i=-(0|this.words[o])+a)>>26,this.words[o]=67108863&i;return this.negative=1,this.strip()},i.prototype._wordDiv=function(t,e){var n=(this.length,t.length),r=this.clone(),o=t,s=0|o.words[o.length-1];0!=(n=26-this._countBits(s))&&(o=o.ushln(n),r.iushln(n),s=0|o.words[o.length-1]);var a,c=r.length-o.length;if("mod"!==e){(a=new i(null)).length=c+1,a.words=new Array(a.length);for(var u=0;u<a.length;u++)a.words[u]=0}var l=r.clone()._ishlnsubmul(o,1,c);0===l.negative&&(r=l,a&&(a.words[c]=1));for(var h=c-1;h>=0;h--){var d=67108864*(0|r.words[o.length+h])+(0|r.words[o.length+h-1]);for(d=Math.min(d/s|0,67108863),r._ishlnsubmul(o,d,h);0!==r.negative;)d--,r.negative=0,r._ishlnsubmul(o,1,h),r.isZero()||(r.negative^=1);a&&(a.words[h]=d)}return a&&a.strip(),r.strip(),"div"!==e&&0!==n&&r.iushrn(n),{div:a||null,mod:r}},i.prototype.divmod=function(t,e,n){return r(!t.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(o=a.div.neg()),"div"!==e&&(s=a.mod.neg(),n&&0!==s.negative&&s.iadd(t)),{div:o,mod:s}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(o=a.div.neg()),{div:o,mod:a.mod}):0!=(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(s=a.mod.neg(),n&&0!==s.negative&&s.isub(t)),{div:a.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new i(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new i(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new i(this.modn(t.words[0]))}:this._wordDiv(t,e);var o,s,a},i.prototype.div=function(t){return this.divmod(t,"div",!1).div},i.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},i.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},i.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var n=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),o=t.andln(1),i=n.cmp(r);return i<0||1===o&&0===i?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},i.prototype.modn=function(t){r(t<=67108863);for(var e=(1<<26)%t,n=0,o=this.length-1;o>=0;o--)n=(e*n+(0|this.words[o]))%t;return n},i.prototype.idivn=function(t){r(t<=67108863);for(var e=0,n=this.length-1;n>=0;n--){var o=(0|this.words[n])+67108864*e;this.words[n]=o/t|0,e=o%t}return this.strip()},i.prototype.divn=function(t){return this.clone().idivn(t)},i.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var o=new i(1),s=new i(0),a=new i(0),c=new i(1),u=0;e.isEven()&&n.isEven();)e.iushrn(1),n.iushrn(1),++u;for(var l=n.clone(),h=e.clone();!e.isZero();){for(var d=0,f=1;0==(e.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(e.iushrn(d);d-- >0;)(o.isOdd()||s.isOdd())&&(o.iadd(l),s.isub(h)),o.iushrn(1),s.iushrn(1);for(var p=0,m=1;0==(n.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(a.isOdd()||c.isOdd())&&(a.iadd(l),c.isub(h)),a.iushrn(1),c.iushrn(1);e.cmp(n)>=0?(e.isub(n),o.isub(a),s.isub(c)):(n.isub(e),a.isub(o),c.isub(s))}return{a:a,b:c,gcd:n.iushln(u)}},i.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var o,s=new i(1),a=new i(0),c=n.clone();e.cmpn(1)>0&&n.cmpn(1)>0;){for(var u=0,l=1;0==(e.words[0]&l)&&u<26;++u,l<<=1);if(u>0)for(e.iushrn(u);u-- >0;)s.isOdd()&&s.iadd(c),s.iushrn(1);for(var h=0,d=1;0==(n.words[0]&d)&&h<26;++h,d<<=1);if(h>0)for(n.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(c),a.iushrn(1);e.cmp(n)>=0?(e.isub(n),s.isub(a)):(n.isub(e),a.isub(s))}return(o=0===e.cmpn(1)?s:a).cmpn(0)<0&&o.iadd(t),o},i.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),n=t.clone();e.negative=0,n.negative=0;for(var r=0;e.isEven()&&n.isEven();r++)e.iushrn(1),n.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;n.isEven();)n.iushrn(1);var o=e.cmp(n);if(o<0){var i=e;e=n,n=i}else if(0===o||0===n.cmpn(1))break;e.isub(n)}return n.iushln(r)},i.prototype.invm=function(t){return this.egcd(t).a.umod(t)},i.prototype.isEven=function(){return 0==(1&this.words[0])},i.prototype.isOdd=function(){return 1==(1&this.words[0])},i.prototype.andln=function(t){return this.words[0]&t},i.prototype.bincn=function(t){r("number"==typeof t);var e=t%26,n=(t-e)/26,o=1<<e;if(this.length<=n)return this._expand(n+1),this.words[n]|=o,this;for(var i=o,s=n;0!==i&&s<this.length;s++){var a=0|this.words[s];i=(a+=i)>>>26,a&=67108863,this.words[s]=a}return 0!==i&&(this.words[s]=i,this.length++),this},i.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},i.prototype.cmpn=function(t){var e,n=t<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)e=1;else{n&&(t=-t),r(t<=67108863,"Number is too big");var o=0|this.words[0];e=o===t?0:o<t?-1:1}return 0!==this.negative?0|-e:e},i.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},i.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,n=this.length-1;n>=0;n--){var r=0|this.words[n],o=0|t.words[n];if(r!==o){r<o?e=-1:r>o&&(e=1);break}}return e},i.prototype.gtn=function(t){return 1===this.cmpn(t)},i.prototype.gt=function(t){return 1===this.cmp(t)},i.prototype.gten=function(t){return this.cmpn(t)>=0},i.prototype.gte=function(t){return this.cmp(t)>=0},i.prototype.ltn=function(t){return-1===this.cmpn(t)},i.prototype.lt=function(t){return-1===this.cmp(t)},i.prototype.lten=function(t){return this.cmpn(t)<=0},i.prototype.lte=function(t){return this.cmp(t)<=0},i.prototype.eqn=function(t){return 0===this.cmpn(t)},i.prototype.eq=function(t){return 0===this.cmp(t)},i.red=function(t){return new M(t)},i.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(t){return this.red=t,this},i.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},i.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},i.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},i.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},i.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},i.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},i.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},i.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var g={k256:null,p224:null,p192:null,p25519:null};function _(t,e){this.name=t,this.p=new i(e,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){_.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function w(){_.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function y(){_.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function b(){_.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function M(t){if("string"==typeof t){var e=i._prime(t);this.m=e.p,this.prime=e}else r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function x(t){M.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}_.prototype._tmp=function(){var t=new i(null);return t.words=new Array(Math.ceil(this.n/13)),t},_.prototype.ireduce=function(t){var e,n=t;do{this.split(n,this.tmp),e=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(e>this.n);var r=e<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):n.strip(),n},_.prototype.split=function(t,e){t.iushrn(this.n,0,e)},_.prototype.imulK=function(t){return t.imul(this.k)},o(v,_),v.prototype.split=function(t,e){for(var n=4194303,r=Math.min(t.length,9),o=0;o<r;o++)e.words[o]=t.words[o];if(e.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var i=t.words[9];for(e.words[e.length++]=i&n,o=10;o<t.length;o++){var s=0|t.words[o];t.words[o-10]=(s&n)<<4|i>>>22,i=s}i>>>=22,t.words[o-10]=i,0===i&&t.length>10?t.length-=10:t.length-=9},v.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,n=0;n<t.length;n++){var r=0|t.words[n];e+=977*r,t.words[n]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},o(w,_),o(y,_),o(b,_),b.prototype.imulK=function(t){for(var e=0,n=0;n<t.length;n++){var r=19*(0|t.words[n])+e,o=67108863&r;r>>>=26,t.words[n]=o,e=r}return 0!==e&&(t.words[t.length++]=e),t},i._prime=function(t){if(g[t])return g[t];var e;if("k256"===t)e=new v;else if("p224"===t)e=new w;else if("p192"===t)e=new y;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new b}return g[t]=e,e},M.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},M.prototype._verify2=function(t,e){r(0==(t.negative|e.negative),"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers")},M.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},M.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},M.prototype.add=function(t,e){this._verify2(t,e);var n=t.add(e);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},M.prototype.iadd=function(t,e){this._verify2(t,e);var n=t.iadd(e);return n.cmp(this.m)>=0&&n.isub(this.m),n},M.prototype.sub=function(t,e){this._verify2(t,e);var n=t.sub(e);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},M.prototype.isub=function(t,e){this._verify2(t,e);var n=t.isub(e);return n.cmpn(0)<0&&n.iadd(this.m),n},M.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},M.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},M.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},M.prototype.isqr=function(t){return this.imul(t,t.clone())},M.prototype.sqr=function(t){return this.mul(t,t)},M.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(r(e%2==1),3===e){var n=this.m.add(new i(1)).iushrn(2);return this.pow(t,n)}for(var o=this.m.subn(1),s=0;!o.isZero()&&0===o.andln(1);)s++,o.iushrn(1);r(!o.isZero());var a=new i(1).toRed(this),c=a.redNeg(),u=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new i(2*l*l).toRed(this);0!==this.pow(l,u).cmp(c);)l.redIAdd(c);for(var h=this.pow(l,o),d=this.pow(t,o.addn(1).iushrn(1)),f=this.pow(t,o),p=s;0!==f.cmp(a);){for(var m=f,g=0;0!==m.cmp(a);g++)m=m.redSqr();r(g<p);var _=this.pow(h,new i(1).iushln(p-g-1));d=d.redMul(_),h=_.redSqr(),f=f.redMul(h),p=g}return d},M.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},M.prototype.pow=function(t,e){if(e.isZero())return new i(1).toRed(this);if(0===e.cmpn(1))return t.clone();var n=new Array(16);n[0]=new i(1).toRed(this),n[1]=t;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],t);var o=n[0],s=0,a=0,c=e.bitLength()%26;for(0===c&&(c=26),r=e.length-1;r>=0;r--){for(var u=e.words[r],l=c-1;l>=0;l--){var h=u>>l&1;o!==n[0]&&(o=this.sqr(o)),0!==h||0!==s?(s<<=1,s|=h,(4==++a||0===r&&0===l)&&(o=this.mul(o,n[s]),a=0,s=0)):a=0}c=26}return o},M.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},M.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},i.mont=function(t){return new x(t)},o(x,M),x.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},x.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},x.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var n=t.imul(e),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=n.isub(r).iushrn(this.shift),i=o;return o.cmp(this.m)>=0?i=o.isub(this.m):o.cmpn(0)<0&&(i=o.iadd(this.m)),i._forceRed(this)},x.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new i(0)._forceRed(this);var n=t.mul(e),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=n.isub(r).iushrn(this.shift),s=o;return o.cmp(this.m)>=0?s=o.isub(this.m):o.cmpn(0)<0&&(s=o.iadd(this.m)),s._forceRed(this)},x.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(ft,e);var pt=ft.exports,mt={},gt=wt;wt.strict=yt,wt.loose=bt;var _t=Object.prototype.toString,vt={"[object Int8Array]":!0,"[object Int16Array]":!0,"[object Int32Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Uint16Array]":!0,"[object Uint32Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0};function wt(t){return yt(t)||bt(t)}function yt(t){return t instanceof Int8Array||t instanceof Int16Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Uint16Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array}function bt(t){return vt[_t.call(t)]}var Mt=gt.strict,xt=e&&e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(mt,"__esModule",{value:!0});var kt=mt.removeHexLeadingZeros=me=mt.sanitizeHex=pe=mt.addHexPrefix=de=mt.removeHexPrefix=mt.padRight=mt.padLeft=mt.sanitizeBytes=mt.swapHex=mt.swapBytes=mt.splitBytes=mt.calcByteLength=mt.trimRight=mt.trimLeft=ie=mt.concatArrays=mt.concatBuffers=mt.getEncoding=mt.getType=mt.isArrayBuffer=mt.isTypedArray=mt.isBuffer=ee=mt.isHexString=mt.isBinaryString=mt.binaryToNumber=mt.binaryToUtf8=mt.binaryToHex=mt.binaryToArray=mt.binaryToBuffer=mt.numberToBinary=mt.numberToUtf8=mt.numberToHex=mt.numberToArray=mt.numberToBuffer=mt.utf8ToBinary=mt.utf8ToNumber=Kt=mt.utf8ToHex=Yt=mt.utf8ToArray=$t=mt.utf8ToBuffer=mt.hexToBinary=mt.hexToNumber=mt.hexToUtf8=Ft=mt.hexToArray=mt.hexToBuffer=mt.arrayToBinary=mt.arrayToNumber=qt=mt.arrayToUtf8=Pt=mt.arrayToHex=Nt=mt.arrayToBuffer=mt.bufferToBinary=mt.bufferToNumber=mt.bufferToUtf8=mt.bufferToHex=It=mt.bufferToArray=void 0;const Ct=xt(gt),St=xt((function(t){if(Mt(t)){var e=Buffer.from(t.buffer);return t.byteLength!==t.buffer.byteLength&&(e=e.slice(t.byteOffset,t.byteOffset+t.byteLength)),e}return Buffer.from(t)}));function Et(t){return new Uint8Array(t)}var It=mt.bufferToArray=Et;function Tt(t,e=!1){const n=t.toString("hex");return e?fe(n):n}function Rt(t){return t.toString("utf8")}function At(t){return t.readUIntBE(0,t.length)}function Ot(t){return St.default(t)}mt.bufferToHex=Tt,mt.bufferToUtf8=Rt,mt.bufferToNumber=At,mt.bufferToBinary=function(t){return jt(Et(t))};var Nt=mt.arrayToBuffer=Ot;function Bt(t,e=!1){return Tt(Ot(t),e)}var Pt=mt.arrayToHex=Bt;function Lt(t){return Rt(Ot(t))}var qt=mt.arrayToUtf8=Lt;function Ut(t){return At(Ot(t))}function jt(t){return Array.from(t).map(Zt).join("")}function Dt(t){return Buffer.from(he(t),"hex")}function Wt(t){return Et(Dt(t))}mt.arrayToNumber=Ut,mt.arrayToBinary=jt,mt.hexToBuffer=Dt;var Ft=mt.hexToArray=Wt;function zt(t){return jt(Wt(t))}function Ht(t){return Buffer.from(t,"utf8")}mt.hexToUtf8=function(t){return Rt(Dt(t))},mt.hexToNumber=function(t){return Ut(Wt(t))},mt.hexToBinary=zt;var $t=mt.utf8ToBuffer=Ht;function Jt(t){return Et(Ht(t))}var Yt=mt.utf8ToArray=Jt;var Kt=mt.utf8ToHex=function(t,e=!1){return Tt(Ht(t),e)};function Zt(t){return ue((t>>>0).toString(2))}function Vt(t){return Ot(Qt(t))}function Qt(t){return new Uint8Array(ae(t).map((t=>parseInt(t,2))))}function Xt(t,e){return Bt(Qt(t),e)}function Gt(t){return!("string"!=typeof t||!new RegExp(/^[01]+$/).test(t))&&t.length%8==0}function te(t,e){return!("string"!=typeof t||!t.match(/^0x[0-9A-Fa-f]*$/))&&(!e||t.length===2+2*e)}mt.utf8ToNumber=function(t){const e=parseInt(t,10);return function(t,e){if(!t)throw new Error(e)}(!function(t){return void 0===t}(e),"Number can only safely store up to 53 bits"),e},mt.utf8ToBinary=function(t){return jt(Jt(t))},mt.numberToBuffer=function(t){return Vt(Zt(t))},mt.numberToArray=function(t){return Qt(Zt(t))},mt.numberToHex=function(t,e){return Xt(Zt(t),e)},mt.numberToUtf8=function(t){return`${t}`},mt.numberToBinary=Zt,mt.binaryToBuffer=Vt,mt.binaryToArray=Qt,mt.binaryToHex=Xt,mt.binaryToUtf8=function(t){return Lt(Qt(t))},mt.binaryToNumber=function(t){return Ut(Qt(t))},mt.isBinaryString=Gt;var ee=mt.isHexString=te;function ne(t){return Buffer.isBuffer(t)}function re(t){return Ct.default.strict(t)&&!ne(t)}function oe(t){return!re(t)&&!ne(t)&&void 0!==t.byteLength}mt.isBuffer=ne,mt.isTypedArray=re,mt.isArrayBuffer=oe,mt.getType=function(t){return ne(t)?"buffer":re(t)?"typed-array":oe(t)?"array-buffer":Array.isArray(t)?"array":typeof t},mt.getEncoding=function(t){return Gt(t)?"binary":te(t)?"hex":"utf8"},mt.concatBuffers=function(...t){return Buffer.concat(t)};var ie=mt.concatArrays=function(...t){let e=[];return t.forEach((t=>e=e.concat(Array.from(t)))),new Uint8Array([...e])};function se(t,e=8){const n=t%e;return n?(t-n)/e*e+e:t}function ae(t,e=8){const n=ue(t).match(new RegExp(`.{${e}}`,"gi"));return Array.from(n||[])}function ce(t){return ae(t).map(ge).join("")}function ue(t,e=8,n="0"){return le(t,se(t.length,e),n)}function le(t,e,n="0"){return _e(t,e,!0,n)}function he(t){return t.replace(/^0x/,"")}mt.trimLeft=function(t,e){const n=t.length-e;return n>0&&(t=t.slice(n)),t},mt.trimRight=function(t,e){return t.slice(0,e)},mt.calcByteLength=se,mt.splitBytes=ae,mt.swapBytes=ce,mt.swapHex=function(t){return Xt(ce(zt(t)))},mt.sanitizeBytes=ue,mt.padLeft=le,mt.padRight=function(t,e,n="0"){return _e(t,e,!1,n)};var de=mt.removeHexPrefix=he;function fe(t){return t.startsWith("0x")?t:`0x${t}`}var pe=mt.addHexPrefix=fe;var me=mt.sanitizeHex=function(t){return(t=ue(t=he(t),2))&&(t=fe(t)),t};function ge(t){return t.split("").reverse().join("")}function _e(t,e,n,r="0"){const o=e-t.length;let i=t;if(o>0){const e=r.repeat(o);i=n?e+t:t+e}return i}function ve(t){return Nt(new Uint8Array(t))}function we(t,e){const n=de(me(new pt(t).toString(16)));return e?n:pe(n)}kt=mt.removeHexLeadingZeros=function(t){const e=t.startsWith("0x");return t=(t=he(t)).startsWith("0")?t.substring(1):t,e?fe(t):t};var ye={},be={};function Me(){return(null==e?void 0:e.crypto)||(null==e?void 0:e.msCrypto)||{}}function xe(){const t=Me();return t.subtle||t.webkitSubtle}Object.defineProperty(be,"__esModule",{value:!0}),be.isBrowserCryptoAvailable=be.getSubtleCrypto=be.getBrowerCrypto=void 0,be.getBrowerCrypto=Me,be.getSubtleCrypto=xe,be.isBrowserCryptoAvailable=function(){return!!Me()&&!!xe()};var ke,Ce,Se,Ee={};function Ie(){return"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product}function Te(){return"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node}function Re(t){return me(t)}Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.isBrowser=Ee.isNode=Ee.isReactNative=void 0,Ee.isReactNative=Ie,Ee.isNode=Te,Ee.isBrowser=function(){return!Ie()&&!Te()},ke=ye,Ce=e&&e.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),Se=e&&e.__exportStar||function(t,e){for(var n in t)"default"===n||e.hasOwnProperty(n)||Ce(e,t,n)},Object.defineProperty(ke,"__esModule",{value:!0}),Se(be,ke),Se(Ee,ke);const Ae=function(){return Date.now()*Math.pow(10,3)+Math.floor(Math.random()*Math.pow(10,3))};function Oe(){return((t,e)=>{for(e=t="";t++<36;e+=51*t&52?(15^t?8^Math.random()*(20^t?16:4):4).toString(16):"-");return e})()}function Ne(t,e){let n;const r=function(t,e){let n;const r=dt[t];return r&&(n=`https://${r}.infura.io/v3/${e}`),n}(t,e.infuraId);return e.custom&&e.custom[t]?n=e.custom[t]:r&&(n=r),n}function Be(t,e){return ee(t,e)}function Pe(t){return void 0!==t.result}function Le(t){return void 0!==t.error}function qe(t){return void 0!==t.event}function Ue(t){t=de(t.toLowerCase());const e=de(n.exports.keccak_256($t(t)));let r="";for(let n=0;n<t.length;n++)parseInt(e[n],16)>7?r+=t[n].toUpperCase():r+=t[n];return pe(r)}function je(t){var e,n,r;return(r=t)&&r.length&&!Be(t[0])&&(t[0]=(e=t[0],Kt(e,!n))),t}function De(t){if(void 0!==t.type&&"0"!==t.type)return t;if(void 0===t.from||(!(e=t.from)||"0x"!==e.toLowerCase().substring(0,2)||!/^(0x)?[0-9a-f]{40}$/i.test(e)||!/^(0x)?[0-9a-f]{40}$/.test(e)&&!/^(0x)?[0-9A-F]{40}$/.test(e)&&e!==Ue(e)))throw new Error("Transaction object must include a valid 'from' value.");var e;function n(t){let e=t;return("number"==typeof t||"string"==typeof t&&!function(t){return""===t||"string"==typeof t&&""===t.trim()}(t))&&(Be(t)?"string"==typeof t&&(e=Re(t)):e=we(t)),"string"==typeof e&&(e=kt(pe(e))),e}const r={from:Re(t.from),to:void 0===t.to?"":Re(t.to),gasPrice:void 0===t.gasPrice?"":n(t.gasPrice),gas:void 0===t.gas?void 0===t.gasLimit?"":n(t.gasLimit):n(t.gas),value:void 0===t.value?"":n(t.value),nonce:void 0===t.nonce?"":n(t.nonce),data:void 0===t.data?"":Re(t.data)||"0x"},o=["gasPrice","gas","value","nonce"];return Object.keys(r).forEach((t=>{!r[t].trim().length&&o.includes(t)&&delete r[t]})),r}var We={},Fe=t=>encodeURIComponent(t).replace(/[!'()*]/g,(t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`)),ze=new RegExp("%[a-f0-9]{2}","gi"),He=new RegExp("(%[a-f0-9]{2})+","gi");function $e(t,e){try{return decodeURIComponent(t.join(""))}catch(o){}if(1===t.length)return t;e=e||1;var n=t.slice(0,e),r=t.slice(e);return Array.prototype.concat.call([],$e(n),$e(r))}function Je(t){try{return decodeURIComponent(t)}catch(r){for(var e=t.match(ze),n=1;n<e.length;n++)e=(t=$e(e,n).join("")).match(ze);return t}}var Ye=function(t){if("string"!=typeof t)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch(e){return function(t){for(var n={"%FE%FF":"","%FF%FE":""},r=He.exec(t);r;){try{n[r[0]]=decodeURIComponent(r[0])}catch(e){var o=Je(r[0]);o!==r[0]&&(n[r[0]]=o)}r=He.exec(t)}n["%C2"]="";for(var i=Object.keys(n),s=0;s<i.length;s++){var a=i[s];t=t.replace(new RegExp(a,"g"),n[a])}return t}(t)}},Ke=(t,e)=>{if("string"!=typeof t||"string"!=typeof e)throw new TypeError("Expected the arguments to be of type `string`");if(""===e)return[t];const n=t.indexOf(e);return-1===n?[t]:[t.slice(0,n),t.slice(n+e.length)]};function Ze(t,e){let n=Ve(t);return n=Object.assign(Object.assign({},n),e),t=function(t){return We.stringify(t)}(n)}function Ve(t){return We.parse(t)}!function(t){const e=Fe,n=Ye,r=Ke;function o(t){if("string"!=typeof t||1!==t.length)throw new TypeError("arrayFormatSeparator must be single character string")}function i(t,n){return n.encode?n.strict?e(t):encodeURIComponent(t):t}function s(t,e){return e.decode?n(t):t}function a(t){return Array.isArray(t)?t.sort():"object"==typeof t?a(Object.keys(t)).sort(((t,e)=>Number(t)-Number(e))).map((e=>t[e])):t}function c(t){const e=t.indexOf("#");return-1!==e&&(t=t.slice(0,e)),t}function u(t){const e=(t=c(t)).indexOf("?");return-1===e?"":t.slice(e+1)}function l(t,e){return e.parseNumbers&&!Number.isNaN(Number(t))&&"string"==typeof t&&""!==t.trim()?t=Number(t):!e.parseBooleans||null===t||"true"!==t.toLowerCase()&&"false"!==t.toLowerCase()||(t="true"===t.toLowerCase()),t}function h(t,e){o((e=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},e)).arrayFormatSeparator);const n=function(t){let e;switch(t.arrayFormat){case"index":return(t,n,r)=>{e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),e?(void 0===r[t]&&(r[t]={}),r[t][e[1]]=n):r[t]=n};case"bracket":return(t,n,r)=>{e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),e?void 0!==r[t]?r[t]=[].concat(r[t],n):r[t]=[n]:r[t]=n};case"comma":case"separator":return(e,n,r)=>{const o="string"==typeof n&&n.split("").indexOf(t.arrayFormatSeparator)>-1?n.split(t.arrayFormatSeparator).map((e=>s(e,t))):null===n?n:s(n,t);r[e]=o};default:return(t,e,n)=>{void 0!==n[t]?n[t]=[].concat(n[t],e):n[t]=e}}}(e),i=Object.create(null);if("string"!=typeof t)return i;if(!(t=t.trim().replace(/^[?#&]/,"")))return i;for(const o of t.split("&")){let[t,a]=r(e.decode?o.replace(/\+/g," "):o,"=");a=void 0===a?null:["comma","separator"].includes(e.arrayFormat)?a:s(a,e),n(s(t,e),a,i)}for(const r of Object.keys(i)){const t=i[r];if("object"==typeof t&&null!==t)for(const n of Object.keys(t))t[n]=l(t[n],e);else i[r]=l(t,e)}return!1===e.sort?i:(!0===e.sort?Object.keys(i).sort():Object.keys(i).sort(e.sort)).reduce(((t,e)=>{const n=i[e];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?t[e]=a(n):t[e]=n,t}),Object.create(null))}t.extract=u,t.parse=h,t.stringify=(t,e)=>{if(!t)return"";o((e=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},e)).arrayFormatSeparator);const n=n=>e.skipNull&&null==t[n]||e.skipEmptyString&&""===t[n],r=function(t){switch(t.arrayFormat){case"index":return e=>(n,r)=>{const o=n.length;return void 0===r||t.skipNull&&null===r||t.skipEmptyString&&""===r?n:null===r?[...n,[i(e,t),"[",o,"]"].join("")]:[...n,[i(e,t),"[",i(o,t),"]=",i(r,t)].join("")]};case"bracket":return e=>(n,r)=>void 0===r||t.skipNull&&null===r||t.skipEmptyString&&""===r?n:null===r?[...n,[i(e,t),"[]"].join("")]:[...n,[i(e,t),"[]=",i(r,t)].join("")];case"comma":case"separator":return e=>(n,r)=>null==r||0===r.length?n:0===n.length?[[i(e,t),"=",i(r,t)].join("")]:[[n,i(r,t)].join(t.arrayFormatSeparator)];default:return e=>(n,r)=>void 0===r||t.skipNull&&null===r||t.skipEmptyString&&""===r?n:null===r?[...n,i(e,t)]:[...n,[i(e,t),"=",i(r,t)].join("")]}}(e),s={};for(const o of Object.keys(t))n(o)||(s[o]=t[o]);const a=Object.keys(s);return!1!==e.sort&&a.sort(e.sort),a.map((n=>{const o=t[n];return void 0===o?"":null===o?i(n,e):Array.isArray(o)?o.reduce(r(n),[]).join("&"):i(n,e)+"="+i(o,e)})).filter((t=>t.length>0)).join("&")},t.parseUrl=(t,e)=>{e=Object.assign({decode:!0},e);const[n,o]=r(t,"#");return Object.assign({url:n.split("?")[0]||"",query:h(u(t),e)},e&&e.parseFragmentIdentifier&&o?{fragmentIdentifier:s(o,e)}:{})},t.stringifyUrl=(e,n)=>{n=Object.assign({encode:!0,strict:!0},n);const r=c(e.url).split("?")[0]||"",o=t.extract(e.url),s=t.parse(o,{sort:!1}),a=Object.assign(s,e.query);let u=t.stringify(a,n);u&&(u=`?${u}`);let l=function(t){let e="";const n=t.indexOf("#");return-1!==n&&(e=t.slice(n)),e}(e.url);return e.fragmentIdentifier&&(l=`#${i(e.fragmentIdentifier,n)}`),`${r}${u}${l}`}}(We);class Qe{constructor(){this._eventEmitters=[],"undefined"!=typeof window&&void 0!==window.addEventListener&&(window.addEventListener("online",(()=>this.trigger("online"))),window.addEventListener("offline",(()=>this.trigger("offline"))))}on(t,e){this._eventEmitters.push({event:t,callback:e})}trigger(t){let e=[];t&&(e=this._eventEmitters.filter((e=>e.event===t))),e.forEach((t=>{t.callback()}))}}const Xe=void 0!==global.WebSocket?global.WebSocket:require("ws");class Ge{constructor(t){if(this.opts=t,this._queue=[],this._events=[],this._subscriptions=[],this._protocol=t.protocol,this._version=t.version,this._url="",this._netMonitor=null,this._socket=null,this._nextSocket=null,this._subscriptions=t.subscriptions||[],this._netMonitor=t.netMonitor||new Qe,!t.url||"string"!=typeof t.url)throw new Error("Missing or invalid WebSocket url");this._url=t.url,this._netMonitor.on("online",(()=>this._socketCreate()))}set readyState(t){}get readyState(){return this._socket?this._socket.readyState:-1}set connecting(t){}get connecting(){return 0===this.readyState}set connected(t){}get connected(){return 1===this.readyState}set closing(t){}get closing(){return 2===this.readyState}set closed(t){}get closed(){return 3===this.readyState}open(){this._socketCreate()}close(){this._socketClose()}send(t,e,n){if(!e||"string"!=typeof e)throw new Error("Missing or invalid topic field");this._socketSend({topic:e,type:"pub",payload:t,silent:!!n})}subscribe(t){this._socketSend({topic:t,type:"sub",payload:"",silent:!0})}on(t,e){this._events.push({event:t,callback:e})}_socketCreate(){if(this._nextSocket)return;const t=function(t,e,n){var r,o;const i=(t.startsWith("https")?t.replace("https","wss"):t.startsWith("http")?t.replace("http","ws"):t).split("?"),s=D()?{protocol:e,version:n,env:"browser",host:(null===(r=K())||void 0===r?void 0:r.host)||""}:{protocol:e,version:n,env:(null===(o=B())||void 0===o?void 0:o.name)||""},a=Ze(function(t){const e=-1!==t.indexOf("?")?t.indexOf("?"):void 0;return void 0!==e?t.substr(e):""}(i[1]||""),s);return i[0]+"?"+a}(this._url,this._protocol,this._version);if(this._nextSocket=new Xe(t),!this._nextSocket)throw new Error("Failed to create socket");this._nextSocket.onmessage=t=>this._socketReceive(t),this._nextSocket.onopen=()=>this._socketOpen(),this._nextSocket.onerror=t=>this._socketError(t),this._nextSocket.onclose=()=>{setTimeout((()=>{this._nextSocket=null,this._socketCreate()}),1e3)}}_socketOpen(){this._socketClose(),this._socket=this._nextSocket,this._nextSocket=null,this._queueSubscriptions(),this._pushQueue()}_socketClose(){this._socket&&(this._socket.onclose=()=>{},this._socket.close())}_socketSend(t){const e=JSON.stringify(t);this._socket&&1===this._socket.readyState?this._socket.send(e):(this._setToQueue(t),this._socketCreate())}async _socketReceive(t){let e;try{e=JSON.parse(t.data)}catch(n){return}if(this._socketSend({topic:e.topic,type:"ack",payload:"",silent:!0}),this._socket&&1===this._socket.readyState){const t=this._events.filter((t=>"message"===t.event));t&&t.length&&t.forEach((t=>t.callback(e)))}}_socketError(t){const e=this._events.filter((t=>"error"===t.event));e&&e.length&&e.forEach((e=>e.callback(t)))}_queueSubscriptions(){this._subscriptions.forEach((t=>this._queue.push({topic:t,type:"sub",payload:"",silent:!0}))),this._subscriptions=this.opts.subscriptions||[]}_setToQueue(t){this._queue.push(t)}_pushQueue(){this._queue.forEach((t=>this._socketSend(t))),this._queue=[]}}class tn{constructor(){this._eventEmitters=[]}subscribe(t){this._eventEmitters.push(t)}unsubscribe(t){this._eventEmitters=this._eventEmitters.filter((e=>e.event!==t))}trigger(t){let e,n=[];e=void 0!==t.method?t.method:Pe(t)||Le(t)?`response:${t.id}`:qe(t)?t.event:"",e&&(n=this._eventEmitters.filter((t=>t.event===e))),n&&n.length||function(t){return lt.includes(t)||t.startsWith("wc_")}(e)||qe(e)||(n=this._eventEmitters.filter((t=>"call_request"===t.event))),n.forEach((e=>{if(Le(t)){const n=new Error(t.error.message);e.callback(n,null)}else e.callback(null,t)}))}}class en{constructor(t="walletconnect"){this.storageId=t}getSession(){let t=null;const e=rt(this.storageId);return e&&void 0!==e.bridge&&(t=e),t}setSession(t){return nt(this.storageId,t),t}removeSession(){ot(this.storageId)}}const nn="abcdefghijklmnopqrstuvwxyz0123456789".split("").map((t=>`https://${t}.bridge.walletconnect.org`));function rn(){return nn[Math.floor(Math.random()*nn.length)]}async function on(t,e="AES-CBC"){return ye.getSubtleCrypto().importKey("raw",t,function(t){return"AES-CBC"===t?{length:256,name:"AES-CBC"}:{hash:{name:"SHA-256"},name:"HMAC"}}(e),!0,function(t){return"AES-CBC"===t?["encrypt","decrypt"]:["sign","verify"]}(e))}function sn(t,e,n){return async function(t,e,n){const r=ye.getSubtleCrypto(),o=await on(e,"AES-CBC"),i=await r.encrypt({iv:t,name:"AES-CBC"},o,n);return new Uint8Array(i)}(t,e,n)}function an(t,e,n){return async function(t,e,n){const r=ye.getSubtleCrypto(),o=await on(e,"AES-CBC"),i=await r.decrypt({iv:t,name:"AES-CBC"},o,n);return new Uint8Array(i)}(t,e,n)}async function cn(t,e){return await async function(t,e){const n=ye.getSubtleCrypto(),r=await on(t,"HMAC"),o=await n.sign({length:256,name:"HMAC"},r,e);return new Uint8Array(o)}(t,e)}async function un(t){const e=function(t){return ye.getBrowerCrypto().getRandomValues(new Uint8Array(t))}((t||256)/8);var n;return n=Nt(e),It(n).buffer}async function ln(t,e){const n=Ft(t.data),r=Ft(t.iv),o=Ft(t.hmac),i=Pt(o,!1),s=ie(n,r),a=await cn(e,s),c=Pt(a,!1);return de(i)===de(c)}var hn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",generateKey:un,verifyHmac:ln,encrypt:async function(t,e,n){const r=It(ve(e)),o=n||await un(128),i=It(ve(o)),s=Pt(i,!1),a=JSON.stringify(t),c=Yt(a),u=await sn(i,r,c),l=Pt(u,!1),h=ie(u,i),d=await cn(r,h);return{data:l,hmac:Pt(d,!1),iv:s}},decrypt:async function(t,e){const n=It(ve(e));if(!n)throw new Error("Missing key: required for decryption");if(!(await ln(t,n)))return null;const r=Ft(t.data),o=Ft(t.iv),i=await an(o,n,r),s=qt(i);let a;try{a=JSON.parse(s)}catch(c){return null}return a}});class dn extends class{constructor(t){if(this.protocol="wc",this.version=1,this._bridge="",this._key=null,this._clientId="",this._clientMeta=null,this._peerId="",this._peerMeta=null,this._handshakeId=0,this._handshakeTopic="",this._connected=!1,this._accounts=[],this._chainId=0,this._networkId=0,this._rpcUrl="",this._eventManager=new tn,this._clientMeta=G()||t.connectorOpts.clientMeta||null,this._cryptoLib=t.cryptoLib,this._sessionStorage=t.sessionStorage||new en(t.connectorOpts.storageId),this._qrcodeModal=t.connectorOpts.qrcodeModal,this._qrcodeModalOptions=t.connectorOpts.qrcodeModalOptions,this._signingMethods=[...ht,...t.connectorOpts.signingMethods||[]],!t.connectorOpts.bridge&&!t.connectorOpts.uri&&!t.connectorOpts.session)throw new Error("Missing one of the required parameters: bridge / uri / session");var e;t.connectorOpts.bridge&&(this.bridge=function(t){return"walletconnect.org"===function(t){return function(t){let e=t.indexOf("//")>-1?t.split("/")[2]:t.split("/")[0];return e=e.split(":")[0],e=e.split("?")[0],e}(t).split(".").slice(-2).join(".")}(t)}(e=t.connectorOpts.bridge)?rn():e),t.connectorOpts.uri&&(this.uri=t.connectorOpts.uri);const n=t.connectorOpts.session||this._getStorageSession();n&&(this.session=n),this.handshakeId&&this._subscribeToSessionResponse(this.handshakeId,"Session request rejected"),this._transport=t.transport||new Ge({protocol:this.protocol,version:this.version,url:this.bridge,subscriptions:[this.clientId]}),this._subscribeToInternalEvents(),this._initTransport(),t.connectorOpts.uri&&this._subscribeToSessionRequest(),t.pushServerOpts&&this._registerPushServer(t.pushServerOpts)}set bridge(t){t&&(this._bridge=t)}get bridge(){return this._bridge}set key(t){if(!t)return;const e=Ft(t).buffer;this._key=e}get key(){if(this._key){return t=this._key,e=!0,Pt(new Uint8Array(t),!e)}var t,e;return""}set clientId(t){t&&(this._clientId=t)}get clientId(){let t=this._clientId;return t||(t=this._clientId=Oe()),this._clientId}set peerId(t){t&&(this._peerId=t)}get peerId(){return this._peerId}set clientMeta(t){}get clientMeta(){let t=this._clientMeta;return t||(t=this._clientMeta=G()),t}set peerMeta(t){this._peerMeta=t}get peerMeta(){return this._peerMeta}set handshakeTopic(t){t&&(this._handshakeTopic=t)}get handshakeTopic(){return this._handshakeTopic}set handshakeId(t){t&&(this._handshakeId=t)}get handshakeId(){return this._handshakeId}get uri(){return this._formatUri()}set uri(t){if(!t)return;const{handshakeTopic:e,bridge:n,key:r}=this._parseUri(t);this.handshakeTopic=e,this.bridge=n,this.key=r}set chainId(t){this._chainId=t}get chainId(){return this._chainId}set networkId(t){this._networkId=t}get networkId(){return this._networkId}set accounts(t){this._accounts=t}get accounts(){return this._accounts}set rpcUrl(t){this._rpcUrl=t}get rpcUrl(){return this._rpcUrl}set connected(t){}get connected(){return this._connected}set pending(t){}get pending(){return!!this._handshakeTopic}get session(){return{connected:this.connected,accounts:this.accounts,chainId:this.chainId,bridge:this.bridge,key:this.key,clientId:this.clientId,clientMeta:this.clientMeta,peerId:this.peerId,peerMeta:this.peerMeta,handshakeId:this.handshakeId,handshakeTopic:this.handshakeTopic}}set session(t){t&&(this._connected=t.connected,this.accounts=t.accounts,this.chainId=t.chainId,this.bridge=t.bridge,this.key=t.key,this.clientId=t.clientId,this.clientMeta=t.clientMeta,this.peerId=t.peerId,this.peerMeta=t.peerMeta,this.handshakeId=t.handshakeId,this.handshakeTopic=t.handshakeTopic)}on(t,e){const n={event:t,callback:e};this._eventManager.subscribe(n)}off(t){this._eventManager.unsubscribe(t)}async createInstantRequest(t){this._key=await this._generateKey();const e=this._formatRequest({method:"wc_instantRequest",params:[{peerId:this.clientId,peerMeta:this.clientMeta,request:this._formatRequest(t)}]});this.handshakeId=e.id,this.handshakeTopic=Oe(),this._eventManager.trigger({event:"display_uri",params:[this.uri]}),this.on("modal_closed",(()=>{throw new Error("User close QRCode Modal")}));const n=()=>{this.killSession()};try{const t=await this._sendCallRequest(e);return t&&n(),t}catch(r){throw n(),r}}async connect(t){if(!this._qrcodeModal)throw new Error("QRCode Modal not provided");return this.connected?{chainId:this.chainId,accounts:this.accounts}:(await this.createSession(t),new Promise((async(t,e)=>{this.on("modal_closed",(()=>e(new Error("User close QRCode Modal")))),this.on("connect",((n,r)=>{if(n)return e(n);t(r.params[0])}))})))}async createSession(t){if(this._connected)throw new Error("Session currently connected");if(this.pending)return;this._key=await this._generateKey();const e=this._formatRequest({method:"wc_sessionRequest",params:[{peerId:this.clientId,peerMeta:this.clientMeta,chainId:t&&t.chainId?t.chainId:null}]});this.handshakeId=e.id,this.handshakeTopic=Oe(),this._sendSessionRequest(e,"Session update rejected",{topic:this.handshakeTopic}),this._eventManager.trigger({event:"display_uri",params:[this.uri]})}approveSession(t){if(this._connected)throw new Error("Session currently connected");this.chainId=t.chainId,this.accounts=t.accounts,this.networkId=t.networkId||0,this.rpcUrl=t.rpcUrl||"";const e={approved:!0,chainId:this.chainId,networkId:this.networkId,accounts:this.accounts,rpcUrl:this.rpcUrl,peerId:this.clientId,peerMeta:this.clientMeta},n={id:this.handshakeId,jsonrpc:"2.0",result:e};this._sendResponse(n),this._connected=!0,this._setStorageSession(),this._eventManager.trigger({event:"connect",params:[{peerId:this.peerId,peerMeta:this.peerMeta,chainId:this.chainId,accounts:this.accounts}]})}rejectSession(t){if(this._connected)throw new Error("Session currently connected");const e=t&&t.message?t.message:"Session Rejected",n=this._formatResponse({id:this.handshakeId,error:{message:e}});this._sendResponse(n),this._connected=!1,this._eventManager.trigger({event:"disconnect",params:[{message:e}]}),this._removeStorageSession()}updateSession(t){if(!this._connected)throw new Error("Session currently disconnected");this.chainId=t.chainId,this.accounts=t.accounts,this.networkId=t.networkId||0,this.rpcUrl=t.rpcUrl||"";const e={approved:!0,chainId:this.chainId,networkId:this.networkId,accounts:this.accounts,rpcUrl:this.rpcUrl},n=this._formatRequest({method:"wc_sessionUpdate",params:[e]});this._sendSessionRequest(n,"Session update rejected"),this._eventManager.trigger({event:"session_update",params:[{chainId:this.chainId,accounts:this.accounts}]}),this._manageStorageSession()}async killSession(t){const e=t?t.message:"Session Disconnected",n=this._formatRequest({method:"wc_sessionUpdate",params:[{approved:!1,chainId:null,networkId:null,accounts:null}]});await this._sendRequest(n),this._handleSessionDisconnect(e)}async sendTransaction(t){if(!this._connected)throw new Error("Session currently disconnected");const e=De(t),n=this._formatRequest({method:"eth_sendTransaction",params:[e]});return await this._sendCallRequest(n)}async signTransaction(t){if(!this._connected)throw new Error("Session currently disconnected");const e=De(t),n=this._formatRequest({method:"eth_signTransaction",params:[e]});return await this._sendCallRequest(n)}async signMessage(t){if(!this._connected)throw new Error("Session currently disconnected");const e=this._formatRequest({method:"eth_sign",params:t});return await this._sendCallRequest(e)}async signPersonalMessage(t){if(!this._connected)throw new Error("Session currently disconnected");t=je(t);const e=this._formatRequest({method:"personal_sign",params:t});return await this._sendCallRequest(e)}async signTypedData(t){if(!this._connected)throw new Error("Session currently disconnected");const e=this._formatRequest({method:"eth_signTypedData",params:t});return await this._sendCallRequest(e)}async updateChain(t){if(!this._connected)throw new Error("Session currently disconnected");const e=this._formatRequest({method:"wallet_updateChain",params:[t]});return await this._sendCallRequest(e)}unsafeSend(t,e){return this._sendRequest(t,e),this._eventManager.trigger({event:"call_request_sent",params:[{request:t,options:e}]}),new Promise(((e,n)=>{this._subscribeToResponse(t.id,((t,r)=>{if(t)n(t);else{if(!r)throw new Error("Missing JSON RPC response");e(r)}}))}))}async sendCustomRequest(t,e){if(!this._connected)throw new Error("Session currently disconnected");switch(t.method){case"eth_accounts":return this.accounts;case"eth_chainId":return we(this.chainId);case"eth_sendTransaction":case"eth_signTransaction":t.params&&(t.params[0]=De(t.params[0]));break;case"personal_sign":t.params&&(t.params=je(t.params))}const n=this._formatRequest(t);return await this._sendCallRequest(n,e)}approveRequest(t){if(!Pe(t))throw new Error('JSON-RPC success response must include "result" field');{const e=this._formatResponse(t);this._sendResponse(e)}}rejectRequest(t){if(!Le(t))throw new Error('JSON-RPC error response must include "error" field');{const e=this._formatResponse(t);this._sendResponse(e)}}transportClose(){this._transport.close()}async _sendRequest(t,e){const n=this._formatRequest(t),r=await this._encrypt(n),o=void 0!==(null==e?void 0:e.topic)?e.topic:this.peerId,i=JSON.stringify(r),s=void 0!==(null==e?void 0:e.forcePushNotification)?!e.forcePushNotification:function(t){return!!t.method.startsWith("wc_")||!ht.includes(t.method)}(n);this._transport.send(i,o,s)}async _sendResponse(t){const e=await this._encrypt(t),n=this.peerId,r=JSON.stringify(e);this._transport.send(r,n,!0)}async _sendSessionRequest(t,e,n){this._sendRequest(t,n),this._subscribeToSessionResponse(t.id,e)}_sendCallRequest(t,e){return this._sendRequest(t,e),this._eventManager.trigger({event:"call_request_sent",params:[{request:t,options:e}]}),this._subscribeToCallResponse(t.id)}_formatRequest(t){if(void 0===t.method)throw new Error('JSON RPC request must have valid "method" value');return{id:void 0===t.id?Ae():t.id,jsonrpc:"2.0",method:t.method,params:void 0===t.params?[]:t.params}}_formatResponse(t){if(void 0===t.id)throw new Error('JSON RPC request must have valid "id" value');const e={id:t.id,jsonrpc:"2.0"};if(Le(t)){const n=function(t){const e=t.message||"Failed or Rejected Request";let n=-32e3;if(t&&!t.code)switch(e){case"Parse error":n=-32700;break;case"Invalid request":n=-32600;break;case"Method not found":n=-32601;break;case"Invalid params":n=-32602;break;case"Internal error":n=-32603;break;default:n=-32e3}return{code:n,message:e}}(t.error);return Object.assign(Object.assign(Object.assign({},e),t),{error:n})}if(Pe(t)){return Object.assign(Object.assign({},e),t)}throw new Error("JSON RPC response format is invalid")}_handleSessionDisconnect(t){const e=t||"Session Disconnected";this._connected||(this._qrcodeModal&&this._qrcodeModal.close(),ot("WALLETCONNECT_DEEPLINK_CHOICE")),this._connected&&(this._connected=!1),this._handshakeId&&(this._handshakeId=0),this._handshakeTopic&&(this._handshakeTopic=""),this._eventManager.trigger({event:"disconnect",params:[{message:e}]}),this._removeStorageSession(),this.transportClose()}_handleSessionResponse(t,e){e&&e.approved?(this._connected?(e.chainId&&(this.chainId=e.chainId),e.accounts&&(this.accounts=e.accounts),this._eventManager.trigger({event:"session_update",params:[{chainId:this.chainId,accounts:this.accounts}]})):(this._connected=!0,e.chainId&&(this.chainId=e.chainId),e.accounts&&(this.accounts=e.accounts),e.peerId&&!this.peerId&&(this.peerId=e.peerId),e.peerMeta&&!this.peerMeta&&(this.peerMeta=e.peerMeta),this._eventManager.trigger({event:"connect",params:[{peerId:this.peerId,peerMeta:this.peerMeta,chainId:this.chainId,accounts:this.accounts}]})),this._manageStorageSession()):this._handleSessionDisconnect(t)}async _handleIncomingMessages(t){if(![this.clientId,this.handshakeTopic].includes(t.topic))return;let e;try{e=JSON.parse(t.payload)}catch(r){return}const n=await this._decrypt(e);n&&this._eventManager.trigger(n)}_subscribeToSessionRequest(){this._transport.subscribe(this.handshakeTopic)}_subscribeToResponse(t,e){this.on(`response:${t}`,e)}_subscribeToSessionResponse(t,e){this._subscribeToResponse(t,((t,n)=>{t?this._handleSessionResponse(t.message):n.result?this._handleSessionResponse(e,n.result):n.error&&n.error.message?this._handleSessionResponse(n.error.message):this._handleSessionResponse(e)}))}_subscribeToCallResponse(t){return new Promise(((e,n)=>{this._subscribeToResponse(t,((t,r)=>{t?n(t):r.result?e(r.result):r.error&&r.error.message?n(new Error(r.error.message)):n(new Error("JSON RPC response format is invalid"))}))}))}_subscribeToInternalEvents(){this.on("display_uri",(()=>{this._qrcodeModal&&this._qrcodeModal.open(this.uri,(()=>{this._eventManager.trigger({event:"modal_closed",params:[]})}),this._qrcodeModalOptions)})),this.on("connect",(()=>{this._qrcodeModal&&this._qrcodeModal.close()})),this.on("call_request_sent",((t,e)=>{const{request:n}=e.params[0];if(U()&&this._signingMethods.includes(n.method)){const t=rt("WALLETCONNECT_DEEPLINK_CHOICE");t&&(window.location.href=t.href)}})),this.on("wc_sessionRequest",((t,e)=>{t&&this._eventManager.trigger({event:"error",params:[{code:"SESSION_REQUEST_ERROR",message:t.toString()}]}),this.handshakeId=e.id,this.peerId=e.params[0].peerId,this.peerMeta=e.params[0].peerMeta;const n=Object.assign(Object.assign({},e),{method:"session_request"});this._eventManager.trigger(n)})),this.on("wc_sessionUpdate",((t,e)=>{t&&this._handleSessionResponse(t.message),this._handleSessionResponse("Session disconnected",e.params[0])}))}_initTransport(){this._transport.on("message",(t=>this._handleIncomingMessages(t))),this._transport.on("open",(()=>this._eventManager.trigger({event:"transport_open",params:[]}))),this._transport.on("close",(()=>this._eventManager.trigger({event:"transport_close",params:[]}))),this._transport.on("error",(()=>this._eventManager.trigger({event:"transport_error",params:["Websocket connection failed"]}))),this._transport.open()}_formatUri(){return`${this.protocol}:${this.handshakeTopic}@${this.version}?bridge=${encodeURIComponent(this.bridge)}&key=${this.key}`}_parseUri(t){const e=function(t){const e=t.indexOf(":"),n=-1!==t.indexOf("?")?t.indexOf("?"):void 0,r=t.substring(0,e),o=function(t){const e=t.split("@");return{handshakeTopic:e[0],version:parseInt(e[1],10)}}(t.substring(e+1,n)),i=function(t){const e=Ve(t);return{key:e.key||"",bridge:e.bridge||""}}(void 0!==n?t.substr(n):"");return Object.assign(Object.assign({protocol:r},o),i)}(t);if(e.protocol===this.protocol){if(!e.handshakeTopic)throw Error("Invalid or missing handshakeTopic parameter value");const t=e.handshakeTopic;if(!e.bridge)throw Error("Invalid or missing bridge url parameter value");const n=decodeURIComponent(e.bridge);if(!e.key)throw Error("Invalid or missing key parameter value");return{handshakeTopic:t,bridge:n,key:e.key}}throw new Error("URI format is invalid")}async _generateKey(){if(this._cryptoLib){return await this._cryptoLib.generateKey()}return null}async _encrypt(t){const e=this._key;if(this._cryptoLib&&e){return await this._cryptoLib.encrypt(t,e)}return null}async _decrypt(t){const e=this._key;if(this._cryptoLib&&e){return await this._cryptoLib.decrypt(t,e)}return null}_getStorageSession(){let t=null;return this._sessionStorage&&(t=this._sessionStorage.getSession()),t}_setStorageSession(){this._sessionStorage&&this._sessionStorage.setSession(this.session)}_removeStorageSession(){this._sessionStorage&&this._sessionStorage.removeSession()}_manageStorageSession(){this._connected?this._setStorageSession():this._removeStorageSession()}_registerPushServer(t){if(!t.url||"string"!=typeof t.url)throw Error("Invalid or missing pushServerOpts.url parameter value");if(!t.type||"string"!=typeof t.type)throw Error("Invalid or missing pushServerOpts.type parameter value");if(!t.token||"string"!=typeof t.token)throw Error("Invalid or missing pushServerOpts.token parameter value");const e={bridge:this.bridge,topic:this.clientId,type:t.type,token:t.token,peerName:"",language:t.language||""};this.on("connect",(async(n,r)=>{if(n)throw n;if(t.peerMeta){const t=r.params[0].peerMeta.name;e.peerName=t}try{const n=await fetch(`${t.url}/new`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)});if(!(await n.json()).success)throw Error("Failed to register in Push Server")}catch(o){throw Error("Failed to register in Push Server")}}))}}{constructor(t,e){super({cryptoLib:hn,connectorOpts:t,pushServerOpts:e})}}var fn=r(ut),pn={},mn={},gn={},_n={}.toString,vn=Array.isArray||function(t){return"[object Array]"==_n.call(t)},wn=vn;bn.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(e){return!1}}();var yn=bn.TYPED_ARRAY_SUPPORT?2147483647:1073741823;function bn(t,e,n){return bn.TYPED_ARRAY_SUPPORT||this instanceof bn?"number"==typeof t?kn(this,t):function(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');if("undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer)return function(t,e,n,r){if(n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");var o;o=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);bn.TYPED_ARRAY_SUPPORT?o.__proto__=bn.prototype:o=Cn(t,o);return o}(t,e,n,r);if("string"==typeof e)return function(t,e){var n=0|En(e),r=xn(t,n),o=r.write(e);o!==n&&(r=r.slice(0,o));return r}(t,e);return function(t,e){if(bn.isBuffer(e)){var n=0|Mn(e.length),r=xn(t,n);return 0===r.length||e.copy(r,0,0,n),r}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(o=e.length)!=o?xn(t,0):Cn(t,e);if("Buffer"===e.type&&Array.isArray(e.data))return Cn(t,e.data)}var o;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}(this,t,e,n):new bn(t,e,n)}function Mn(t){if(t>=yn)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+yn.toString(16)+" bytes");return 0|t}function xn(t,e){var n;return bn.TYPED_ARRAY_SUPPORT?(n=new Uint8Array(e)).__proto__=bn.prototype:(null===(n=t)&&(n=new bn(e)),n.length=e),n}function kn(t,e){var n=xn(t,e<0?0:0|Mn(e));if(!bn.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)n[r]=0;return n}function Cn(t,e){for(var n=e.length<0?0:0|Mn(e.length),r=xn(t,n),o=0;o<n;o+=1)r[o]=255&e[o];return r}function Sn(t,e){var n;e=e||1/0;for(var r=t.length,o=null,i=[],s=0;s<r;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!o){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(e-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;i.push(n)}else if(n<2048){if((e-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function En(t){return bn.isBuffer(t)?t.length:"undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer)?t.byteLength:("string"!=typeof t&&(t=""+t),0===t.length?0:Sn(t).length)}bn.TYPED_ARRAY_SUPPORT&&(bn.prototype.__proto__=Uint8Array.prototype,bn.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&bn[Symbol.species]===bn&&Object.defineProperty(bn,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1})),bn.prototype.write=function(t,e,n){void 0===e||void 0===n&&"string"==typeof e?(n=this.length,e=0):isFinite(e)&&(e|=0,isFinite(n)?n|=0:n=void 0);var r=this.length-e;if((void 0===n||n>r)&&(n=r),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");return function(t,e,n,r){return function(t,e,n,r){for(var o=0;o<r&&!(o+n>=e.length||o>=t.length);++o)e[o+n]=t[o];return o}(Sn(e,t.length-n),t,n,r)}(this,t,e,n)},bn.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),bn.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=bn.prototype;else{var o=e-t;n=new bn(o,void 0);for(var i=0;i<o;++i)n[i]=this[i+t]}return n},bn.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var o,i=r-n;if(this===t&&n<e&&e<r)for(o=i-1;o>=0;--o)t[o+e]=this[o+n];else if(i<1e3||!bn.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)t[o+e]=this[o+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+i),e);return i},bn.prototype.fill=function(t,e,n){if("string"==typeof t){if("string"==typeof e?(e=0,n=this.length):"string"==typeof n&&(n=this.length),1===t.length){var r=t.charCodeAt(0);r<256&&(t=r)}}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var i=bn.isBuffer(t)?t:new bn(t),s=i.length;for(o=0;o<n-e;++o)this[o+e]=i[o%s]}return this},bn.concat=function(t,e){if(!wn(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return xn(null,0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=kn(null,e),o=0;for(n=0;n<t.length;++n){var i=t[n];if(!bn.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,o),o+=i.length}return r},bn.byteLength=En,bn.prototype._isBuffer=!0,bn.isBuffer=function(t){return!(null==t||!t._isBuffer)},gn.alloc=function(t){var e=new bn(t);return e.fill(0),e},gn.from=function(t){return new bn(t)};var In,Tn={},Rn=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Tn.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return 4*t+17},Tn.getSymbolTotalCodewords=function(t){return Rn[t]},Tn.getBCHDigit=function(t){for(var e=0;0!==t;)e++,t>>>=1;return e},Tn.setToSJISFunction=function(t){if("function"!=typeof t)throw new Error('"toSJISFunc" is not a valid function.');In=t},Tn.isKanjiModeEnabled=function(){return void 0!==In},Tn.toSJIS=function(t){return In(t)};var An={};function On(){this.buffer=[],this.length=0}!function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2},t.isValid=function(t){return t&&void 0!==t.bit&&t.bit>=0&&t.bit<4},t.from=function(e,n){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+e)}}(e)}catch(r){return n}}}(An),On.prototype={get:function(t){var e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(var n=0;n<e;n++)this.putBit(1==(t>>>e-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var Nn=On,Bn=gn;function Pn(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=Bn.alloc(t*t),this.reservedBit=Bn.alloc(t*t)}Pn.prototype.set=function(t,e,n,r){var o=t*this.size+e;this.data[o]=n,r&&(this.reservedBit[o]=!0)},Pn.prototype.get=function(t,e){return this.data[t*this.size+e]},Pn.prototype.xor=function(t,e,n){this.data[t*this.size+e]^=n},Pn.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var Ln=Pn,qn={};!function(t){var e=Tn.getSymbolSize;t.getRowColCoords=function(t){if(1===t)return[];for(var n=Math.floor(t/7)+2,r=e(t),o=145===r?26:2*Math.ceil((r-13)/(2*n-2)),i=[r-7],s=1;s<n-1;s++)i[s]=i[s-1]-o;return i.push(6),i.reverse()},t.getPositions=function(e){for(var n=[],r=t.getRowColCoords(e),o=r.length,i=0;i<o;i++)for(var s=0;s<o;s++)0===i&&0===s||0===i&&s===o-1||i===o-1&&0===s||n.push([r[i],r[s]]);return n}}(qn);var Un={},jn=Tn.getSymbolSize;Un.getPositions=function(t){var e=jn(t);return[[0,0],[e-7,0],[0,e-7]]};var Dn={};!function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var e=3,n=3,r=40,o=10;function i(e,n,r){switch(e){case t.Patterns.PATTERN000:return(n+r)%2==0;case t.Patterns.PATTERN001:return n%2==0;case t.Patterns.PATTERN010:return r%3==0;case t.Patterns.PATTERN011:return(n+r)%3==0;case t.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(r/3))%2==0;case t.Patterns.PATTERN101:return n*r%2+n*r%3==0;case t.Patterns.PATTERN110:return(n*r%2+n*r%3)%2==0;case t.Patterns.PATTERN111:return(n*r%3+(n+r)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}}t.isValid=function(t){return null!=t&&""!==t&&!isNaN(t)&&t>=0&&t<=7},t.from=function(e){return t.isValid(e)?parseInt(e,10):void 0},t.getPenaltyN1=function(t){for(var n=t.size,r=0,o=0,i=0,s=null,a=null,c=0;c<n;c++){o=i=0,s=a=null;for(var u=0;u<n;u++){var l=t.get(c,u);l===s?o++:(o>=5&&(r+=e+(o-5)),s=l,o=1),(l=t.get(u,c))===a?i++:(i>=5&&(r+=e+(i-5)),a=l,i=1)}o>=5&&(r+=e+(o-5)),i>=5&&(r+=e+(i-5))}return r},t.getPenaltyN2=function(t){for(var e=t.size,r=0,o=0;o<e-1;o++)for(var i=0;i<e-1;i++){var s=t.get(o,i)+t.get(o,i+1)+t.get(o+1,i)+t.get(o+1,i+1);4!==s&&0!==s||r++}return r*n},t.getPenaltyN3=function(t){for(var e=t.size,n=0,o=0,i=0,s=0;s<e;s++){o=i=0;for(var a=0;a<e;a++)o=o<<1&2047|t.get(s,a),a>=10&&(1488===o||93===o)&&n++,i=i<<1&2047|t.get(a,s),a>=10&&(1488===i||93===i)&&n++}return n*r},t.getPenaltyN4=function(t){for(var e=0,n=t.data.length,r=0;r<n;r++)e+=t.data[r];return Math.abs(Math.ceil(100*e/n/5)-10)*o},t.applyMask=function(t,e){for(var n=e.size,r=0;r<n;r++)for(var o=0;o<n;o++)e.isReserved(o,r)||e.xor(o,r,i(t,o,r))},t.getBestMask=function(e,n){for(var r=Object.keys(t.Patterns).length,o=0,i=1/0,s=0;s<r;s++){n(s),t.applyMask(s,e);var a=t.getPenaltyN1(e)+t.getPenaltyN2(e)+t.getPenaltyN3(e)+t.getPenaltyN4(e);t.applyMask(s,e),a<i&&(i=a,o=s)}return o}}(Dn);var Wn={},Fn=An,zn=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Hn=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Wn.getBlocksCount=function(t,e){switch(e){case Fn.L:return zn[4*(t-1)+0];case Fn.M:return zn[4*(t-1)+1];case Fn.Q:return zn[4*(t-1)+2];case Fn.H:return zn[4*(t-1)+3];default:return}},Wn.getTotalCodewordsCount=function(t,e){switch(e){case Fn.L:return Hn[4*(t-1)+0];case Fn.M:return Hn[4*(t-1)+1];case Fn.Q:return Hn[4*(t-1)+2];case Fn.H:return Hn[4*(t-1)+3];default:return}};var $n={},Jn={},Yn=gn,Kn=Yn.alloc(512),Zn=Yn.alloc(256);!function(){for(var t=1,e=0;e<255;e++)Kn[e]=t,Zn[t]=e,256&(t<<=1)&&(t^=285);for(e=255;e<512;e++)Kn[e]=Kn[e-255]}(),Jn.log=function(t){if(t<1)throw new Error("log("+t+")");return Zn[t]},Jn.exp=function(t){return Kn[t]},Jn.mul=function(t,e){return 0===t||0===e?0:Kn[Zn[t]+Zn[e]]},function(t){var e=gn,n=Jn;t.mul=function(t,r){for(var o=e.alloc(t.length+r.length-1),i=0;i<t.length;i++)for(var s=0;s<r.length;s++)o[i+s]^=n.mul(t[i],r[s]);return o},t.mod=function(t,r){for(var o=e.from(t);o.length-r.length>=0;){for(var i=o[0],s=0;s<r.length;s++)o[s]^=n.mul(r[s],i);for(var a=0;a<o.length&&0===o[a];)a++;o=o.slice(a)}return o},t.generateECPolynomial=function(r){for(var o=e.from([1]),i=0;i<r;i++)o=t.mul(o,[1,n.exp(i)]);return o}}($n);var Vn=gn,Qn=$n,Xn=o.Buffer;function Gn(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}Gn.prototype.initialize=function(t){this.degree=t,this.genPoly=Qn.generateECPolynomial(this.degree)},Gn.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");var e=Vn.alloc(this.degree),n=Xn.concat([t,e],t.length+this.degree),r=Qn.mod(n,this.genPoly),o=this.degree-r.length;if(o>0){var i=Vn.alloc(this.degree);return r.copy(i,o),i}return r};var tr=Gn,er={},nr={},rr={isValid:function(t){return!isNaN(t)&&t>=1&&t<=40}},or={},ir="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+",sr="(?:(?![A-Z0-9 $%*+\\-./:]|"+(ir=ir.replace(/u/g,"\\u"))+")(?:.|[\r\n]))+";or.KANJI=new RegExp(ir,"g"),or.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),or.BYTE=new RegExp(sr,"g"),or.NUMERIC=new RegExp("[0-9]+","g"),or.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");var ar=new RegExp("^"+ir+"$"),cr=new RegExp("^[0-9]+$"),ur=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");or.testKanji=function(t){return ar.test(t)},or.testNumeric=function(t){return cr.test(t)},or.testAlphanumeric=function(t){return ur.test(t)},function(t){var e=rr,n=or;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(t,n){if(!t.ccBits)throw new Error("Invalid mode: "+t);if(!e.isValid(n))throw new Error("Invalid version: "+n);return n>=1&&n<10?t.ccBits[0]:n<27?t.ccBits[1]:t.ccBits[2]},t.getBestModeForData=function(e){return n.testNumeric(e)?t.NUMERIC:n.testAlphanumeric(e)?t.ALPHANUMERIC:n.testKanji(e)?t.KANJI:t.BYTE},t.toString=function(t){if(t&&t.id)return t.id;throw new Error("Invalid mode")},t.isValid=function(t){return t&&t.bit&&t.ccBits},t.from=function(e,n){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+e)}}(e)}catch(r){return n}}}(nr),function(t){var e=Tn,n=Wn,r=An,o=nr,i=rr,s=vn,a=e.getBCHDigit(7973);function c(t,e){return o.getCharCountIndicator(t,e)+4}function u(t,e){var n=0;return t.forEach((function(t){var r=c(t.mode,e);n+=r+t.getBitsLength()})),n}t.from=function(t,e){return i.isValid(t)?parseInt(t,10):e},t.getCapacity=function(t,r,s){if(!i.isValid(t))throw new Error("Invalid QR Code version");void 0===s&&(s=o.BYTE);var a=8*(e.getSymbolTotalCodewords(t)-n.getTotalCodewordsCount(t,r));if(s===o.MIXED)return a;var u=a-c(s,t);switch(s){case o.NUMERIC:return Math.floor(u/10*3);case o.ALPHANUMERIC:return Math.floor(u/11*2);case o.KANJI:return Math.floor(u/13);case o.BYTE:default:return Math.floor(u/8)}},t.getBestVersionForData=function(e,n){var i,a=r.from(n,r.M);if(s(e)){if(e.length>1)return function(e,n){for(var r=1;r<=40;r++)if(u(e,r)<=t.getCapacity(r,n,o.MIXED))return r}(e,a);if(0===e.length)return 1;i=e[0]}else i=e;return function(e,n,r){for(var o=1;o<=40;o++)if(n<=t.getCapacity(o,r,e))return o}(i.mode,i.getLength(),a)},t.getEncodedBits=function(t){if(!i.isValid(t)||t<7)throw new Error("Invalid QR Code version");for(var n=t<<12;e.getBCHDigit(n)-a>=0;)n^=7973<<e.getBCHDigit(n)-a;return t<<12|n}}(er);var lr={},hr=Tn,dr=hr.getBCHDigit(1335);lr.getEncodedBits=function(t,e){for(var n=t.bit<<3|e,r=n<<10;hr.getBCHDigit(r)-dr>=0;)r^=1335<<hr.getBCHDigit(r)-dr;return 21522^(n<<10|r)};var fr={},pr=nr;function mr(t){this.mode=pr.NUMERIC,this.data=t.toString()}mr.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)},mr.prototype.getLength=function(){return this.data.length},mr.prototype.getBitsLength=function(){return mr.getBitsLength(this.data.length)},mr.prototype.write=function(t){var e,n,r;for(e=0;e+3<=this.data.length;e+=3)n=this.data.substr(e,3),r=parseInt(n,10),t.put(r,10);var o=this.data.length-e;o>0&&(n=this.data.substr(e),r=parseInt(n,10),t.put(r,3*o+1))};var gr=mr,_r=nr,vr=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function wr(t){this.mode=_r.ALPHANUMERIC,this.data=t}wr.getBitsLength=function(t){return 11*Math.floor(t/2)+t%2*6},wr.prototype.getLength=function(){return this.data.length},wr.prototype.getBitsLength=function(){return wr.getBitsLength(this.data.length)},wr.prototype.write=function(t){var e;for(e=0;e+2<=this.data.length;e+=2){var n=45*vr.indexOf(this.data[e]);n+=vr.indexOf(this.data[e+1]),t.put(n,11)}this.data.length%2&&t.put(vr.indexOf(this.data[e]),6)};var yr=wr,br=gn,Mr=nr;function xr(t){this.mode=Mr.BYTE,this.data=br.from(t)}xr.getBitsLength=function(t){return 8*t},xr.prototype.getLength=function(){return this.data.length},xr.prototype.getBitsLength=function(){return xr.getBitsLength(this.data.length)},xr.prototype.write=function(t){for(var e=0,n=this.data.length;e<n;e++)t.put(this.data[e],8)};var kr=xr,Cr=nr,Sr=Tn;function Er(t){this.mode=Cr.KANJI,this.data=t}Er.getBitsLength=function(t){return 13*t},Er.prototype.getLength=function(){return this.data.length},Er.prototype.getBitsLength=function(){return Er.getBitsLength(this.data.length)},Er.prototype.write=function(t){var e;for(e=0;e<this.data.length;e++){var n=Sr.toSJIS(this.data[e]);if(n>=33088&&n<=40956)n-=33088;else{if(!(n>=57408&&n<=60351))throw new Error("Invalid SJIS character: "+this.data[e]+"\nMake sure your charset is UTF-8");n-=49472}n=192*(n>>>8&255)+(255&n),t.put(n,13)}};var Ir,Tr=Er,Rr={exports:{}};Rr.exports=Ir={single_source_shortest_paths:function(t,e,n){var r={},o={};o[e]=0;var i,s,a,c,u,l,h,d=Ir.PriorityQueue.make();for(d.push(e,0);!d.empty();)for(a in s=(i=d.pop()).value,c=i.cost,u=t[s]||{})u.hasOwnProperty(a)&&(l=c+u[a],h=o[a],(void 0===o[a]||h>l)&&(o[a]=l,d.push(a,l),r[a]=s));if(void 0!==n&&void 0===o[n]){var f=["Could not find a path from ",e," to ",n,"."].join("");throw new Error(f)}return r},extract_shortest_path_from_predecessor_list:function(t,e){for(var n=[],r=e;r;)n.push(r),r=t[r];return n.reverse(),n},find_path:function(t,e,n){var r=Ir.single_source_shortest_paths(t,e,n);return Ir.extract_shortest_path_from_predecessor_list(r,n)},PriorityQueue:{make:function(t){var e,n=Ir.PriorityQueue,r={};for(e in t=t||{},n)n.hasOwnProperty(e)&&(r[e]=n[e]);return r.queue=[],r.sorter=t.sorter||n.default_sorter,r},default_sorter:function(t,e){return t.cost-e.cost},push:function(t,e){var n={value:t,cost:e};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}},function(t){var e=nr,n=gr,r=yr,o=kr,i=Tr,s=or,a=Tn,c=Rr.exports;function u(t){return unescape(encodeURIComponent(t)).length}function l(t,e,n){for(var r,o=[];null!==(r=t.exec(n));)o.push({data:r[0],index:r.index,mode:e,length:r[0].length});return o}function h(t){var n,r,o=l(s.NUMERIC,e.NUMERIC,t),i=l(s.ALPHANUMERIC,e.ALPHANUMERIC,t);return a.isKanjiModeEnabled()?(n=l(s.BYTE,e.BYTE,t),r=l(s.KANJI,e.KANJI,t)):(n=l(s.BYTE_KANJI,e.BYTE,t),r=[]),o.concat(i,n,r).sort((function(t,e){return t.index-e.index})).map((function(t){return{data:t.data,mode:t.mode,length:t.length}}))}function d(t,s){switch(s){case e.NUMERIC:return n.getBitsLength(t);case e.ALPHANUMERIC:return r.getBitsLength(t);case e.KANJI:return i.getBitsLength(t);case e.BYTE:return o.getBitsLength(t)}}function f(t,s){var c,u=e.getBestModeForData(t);if((c=e.from(s,u))!==e.BYTE&&c.bit<u.bit)throw new Error('"'+t+'" cannot be encoded with mode '+e.toString(c)+".\n Suggested mode is: "+e.toString(u));switch(c!==e.KANJI||a.isKanjiModeEnabled()||(c=e.BYTE),c){case e.NUMERIC:return new n(t);case e.ALPHANUMERIC:return new r(t);case e.KANJI:return new i(t);case e.BYTE:return new o(t)}}t.fromArray=function(t){return t.reduce((function(t,e){return"string"==typeof e?t.push(f(e,null)):e.data&&t.push(f(e.data,e.mode)),t}),[])},t.fromString=function(n,r){for(var o=function(t,n){for(var r={},o={start:{}},i=["start"],s=0;s<t.length;s++){for(var a=t[s],c=[],u=0;u<a.length;u++){var l=a[u],h=""+s+u;c.push(h),r[h]={node:l,lastCount:0},o[h]={};for(var f=0;f<i.length;f++){var p=i[f];r[p]&&r[p].node.mode===l.mode?(o[p][h]=d(r[p].lastCount+l.length,l.mode)-d(r[p].lastCount,l.mode),r[p].lastCount+=l.length):(r[p]&&(r[p].lastCount=l.length),o[p][h]=d(l.length,l.mode)+4+e.getCharCountIndicator(l.mode,n))}}i=c}for(f=0;f<i.length;f++)o[i[f]].end=0;return{map:o,table:r}}(function(t){for(var n=[],r=0;r<t.length;r++){var o=t[r];switch(o.mode){case e.NUMERIC:n.push([o,{data:o.data,mode:e.ALPHANUMERIC,length:o.length},{data:o.data,mode:e.BYTE,length:o.length}]);break;case e.ALPHANUMERIC:n.push([o,{data:o.data,mode:e.BYTE,length:o.length}]);break;case e.KANJI:n.push([o,{data:o.data,mode:e.BYTE,length:u(o.data)}]);break;case e.BYTE:n.push([{data:o.data,mode:e.BYTE,length:u(o.data)}])}}return n}(h(n,a.isKanjiModeEnabled())),r),i=c.find_path(o.map,"start","end"),s=[],l=1;l<i.length-1;l++)s.push(o.table[i[l]].node);return t.fromArray(function(t){return t.reduce((function(t,e){var n=t.length-1>=0?t[t.length-1]:null;return n&&n.mode===e.mode?(t[t.length-1].data+=e.data,t):(t.push(e),t)}),[])}(s))},t.rawSplit=function(e){return t.fromArray(h(e,a.isKanjiModeEnabled()))}}(fr);var Ar=gn,Or=Tn,Nr=An,Br=Nn,Pr=Ln,Lr=qn,qr=Un,Ur=Dn,jr=Wn,Dr=tr,Wr=er,Fr=lr,zr=nr,Hr=fr,$r=vn;function Jr(t,e,n){var r,o,i=t.size,s=Fr.getEncodedBits(e,n);for(r=0;r<15;r++)o=1==(s>>r&1),r<6?t.set(r,8,o,!0):r<8?t.set(r+1,8,o,!0):t.set(i-15+r,8,o,!0),r<8?t.set(8,i-r-1,o,!0):r<9?t.set(8,15-r-1+1,o,!0):t.set(8,15-r-1,o,!0);t.set(i-8,8,1,!0)}function Yr(t,e,n){var r=new Br;n.forEach((function(e){r.put(e.mode.bit,4),r.put(e.getLength(),zr.getCharCountIndicator(e.mode,t)),e.write(r)}));var o=8*(Or.getSymbolTotalCodewords(t)-jr.getTotalCodewordsCount(t,e));for(r.getLengthInBits()+4<=o&&r.put(0,4);r.getLengthInBits()%8!=0;)r.putBit(0);for(var i=(o-r.getLengthInBits())/8,s=0;s<i;s++)r.put(s%2?17:236,8);return function(t,e,n){for(var r=Or.getSymbolTotalCodewords(e),o=jr.getTotalCodewordsCount(e,n),i=r-o,s=jr.getBlocksCount(e,n),a=s-r%s,c=Math.floor(r/s),u=Math.floor(i/s),l=u+1,h=c-u,d=new Dr(h),f=0,p=new Array(s),m=new Array(s),g=0,_=Ar.from(t.buffer),v=0;v<s;v++){var w=v<a?u:l;p[v]=_.slice(f,f+w),m[v]=d.encode(p[v]),f+=w,g=Math.max(g,w)}var y,b,M=Ar.alloc(r),x=0;for(y=0;y<g;y++)for(b=0;b<s;b++)y<p[b].length&&(M[x++]=p[b][y]);for(y=0;y<h;y++)for(b=0;b<s;b++)M[x++]=m[b][y];return M}(r,t,e)}function Kr(t,e,n,r){var o;if($r(t))o=Hr.fromArray(t);else{if("string"!=typeof t)throw new Error("Invalid data");var i=e;if(!i){var s=Hr.rawSplit(t);i=Wr.getBestVersionForData(s,n)}o=Hr.fromString(t,i||40)}var a=Wr.getBestVersionForData(o,n);if(!a)throw new Error("The amount of data is too big to be stored in a QR Code");if(e){if(e<a)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+a+".\n")}else e=a;var c=Yr(e,n,o),u=Or.getSymbolSize(e),l=new Pr(u);return function(t,e){for(var n=t.size,r=qr.getPositions(e),o=0;o<r.length;o++)for(var i=r[o][0],s=r[o][1],a=-1;a<=7;a++)if(!(i+a<=-1||n<=i+a))for(var c=-1;c<=7;c++)s+c<=-1||n<=s+c||(a>=0&&a<=6&&(0===c||6===c)||c>=0&&c<=6&&(0===a||6===a)||a>=2&&a<=4&&c>=2&&c<=4?t.set(i+a,s+c,!0,!0):t.set(i+a,s+c,!1,!0))}(l,e),function(t){for(var e=t.size,n=8;n<e-8;n++){var r=n%2==0;t.set(n,6,r,!0),t.set(6,n,r,!0)}}(l),function(t,e){for(var n=Lr.getPositions(e),r=0;r<n.length;r++)for(var o=n[r][0],i=n[r][1],s=-2;s<=2;s++)for(var a=-2;a<=2;a++)-2===s||2===s||-2===a||2===a||0===s&&0===a?t.set(o+s,i+a,!0,!0):t.set(o+s,i+a,!1,!0)}(l,e),Jr(l,n,0),e>=7&&function(t,e){for(var n,r,o,i=t.size,s=Wr.getEncodedBits(e),a=0;a<18;a++)n=Math.floor(a/3),r=a%3+i-8-3,o=1==(s>>a&1),t.set(n,r,o,!0),t.set(r,n,o,!0)}(l,e),function(t,e){for(var n=t.size,r=-1,o=n-1,i=7,s=0,a=n-1;a>0;a-=2)for(6===a&&a--;;){for(var c=0;c<2;c++)if(!t.isReserved(o,a-c)){var u=!1;s<e.length&&(u=1==(e[s]>>>i&1)),t.set(o,a-c,u),-1==--i&&(s++,i=7)}if((o+=r)<0||n<=o){o-=r,r=-r;break}}}(l,c),isNaN(r)&&(r=Ur.getBestMask(l,Jr.bind(null,l,n))),Ur.applyMask(r,l),Jr(l,n,r),{modules:l,version:e,errorCorrectionLevel:n,maskPattern:r,segments:o}}mn.create=function(t,e){if(void 0===t||""===t)throw new Error("No input text");var n,r,o=Nr.M;return void 0!==e&&(o=Nr.from(e.errorCorrectionLevel,Nr.M),n=Wr.from(e.version),r=Ur.from(e.maskPattern),e.toSJISFunc&&Or.setToSJISFunction(e.toSJISFunc)),Kr(t,n,o,r)};var Zr={},Vr={};!function(t){function e(t){if("number"==typeof t&&(t=t.toString()),"string"!=typeof t)throw new Error("Color should be defined as hex string");var e=t.slice().replace("#","").split("");if(e.length<3||5===e.length||e.length>8)throw new Error("Invalid hex color: "+t);3!==e.length&&4!==e.length||(e=Array.prototype.concat.apply([],e.map((function(t){return[t,t]})))),6===e.length&&e.push("F","F");var n=parseInt(e.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:255&n,hex:"#"+e.slice(0,6).join("")}}t.getOptions=function(t){t||(t={}),t.color||(t.color={});var n=void 0===t.margin||null===t.margin||t.margin<0?4:t.margin,r=t.width&&t.width>=21?t.width:void 0,o=t.scale||4;return{width:r,scale:r?4:o,margin:n,color:{dark:e(t.color.dark||"#000000ff"),light:e(t.color.light||"#ffffffff")},type:t.type,rendererOpts:t.rendererOpts||{}}},t.getScale=function(t,e){return e.width&&e.width>=t+2*e.margin?e.width/(t+2*e.margin):e.scale},t.getImageWidth=function(e,n){var r=t.getScale(e,n);return Math.floor((e+2*n.margin)*r)},t.qrToImageData=function(e,n,r){for(var o=n.modules.size,i=n.modules.data,s=t.getScale(o,r),a=Math.floor((o+2*r.margin)*s),c=r.margin*s,u=[r.color.light,r.color.dark],l=0;l<a;l++)for(var h=0;h<a;h++){var d=4*(l*a+h),f=r.color.light;if(l>=c&&h>=c&&l<a-c&&h<a-c)f=u[i[Math.floor((l-c)/s)*o+Math.floor((h-c)/s)]?1:0];e[d++]=f.r,e[d++]=f.g,e[d++]=f.b,e[d]=f.a}}}(Vr),function(t){var e=Vr;t.render=function(t,n,r){var o=r,i=n;void 0!==o||n&&n.getContext||(o=n,n=void 0),n||(i=function(){try{return document.createElement("canvas")}catch(t){throw new Error("You need to specify a canvas element")}}()),o=e.getOptions(o);var s=e.getImageWidth(t.modules.size,o),a=i.getContext("2d"),c=a.createImageData(s,s);return e.qrToImageData(c.data,t,o),function(t,e,n){t.clearRect(0,0,e.width,e.height),e.style||(e.style={}),e.height=n,e.width=n,e.style.height=n+"px",e.style.width=n+"px"}(a,i,s),a.putImageData(c,0,0),i},t.renderToDataURL=function(e,n,r){var o=r;void 0!==o||n&&n.getContext||(o=n,n=void 0),o||(o={});var i=t.render(e,n,o),s=o.type||"image/png",a=o.rendererOpts||{};return i.toDataURL(s,a.quality)}}(Zr);var Qr={},Xr=Vr;function Gr(t,e){var n=t.a/255,r=e+'="'+t.hex+'"';return n<1?r+" "+e+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function to(t,e,n){var r=t+e;return void 0!==n&&(r+=" "+n),r}Qr.render=function(t,e,n){var r=Xr.getOptions(e),o=t.modules.size,i=t.modules.data,s=o+2*r.margin,a=r.color.light.a?"<path "+Gr(r.color.light,"fill")+' d="M0 0h'+s+"v"+s+'H0z"/>':"",c="<path "+Gr(r.color.dark,"stroke")+' d="'+function(t,e,n){for(var r="",o=0,i=!1,s=0,a=0;a<t.length;a++){var c=Math.floor(a%e),u=Math.floor(a/e);c||i||(i=!0),t[a]?(s++,a>0&&c>0&&t[a-1]||(r+=i?to("M",c+n,.5+u+n):to("m",o,0),o=0,i=!1),c+1<e&&t[a+1]||(r+=to("h",s),s=0)):o++}return r}(i,o,r.margin)+'"/>',u='viewBox="0 0 '+s+" "+s+'"',l='<svg xmlns="http://www.w3.org/2000/svg" '+(r.width?'width="'+r.width+'" height="'+r.width+'" ':"")+u+' shape-rendering="crispEdges">'+a+c+"</svg>\n";return"function"==typeof n&&n(null,l),l};var eo=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then},no=mn,ro=Zr,oo=Qr;function io(t,e,n,r,o){var i=[].slice.call(arguments,1),s=i.length,a="function"==typeof i[s-1];if(!a&&!eo())throw new Error("Callback required as last argument");if(!a){if(s<1)throw new Error("Too few arguments provided");return 1===s?(n=e,e=r=void 0):2!==s||e.getContext||(r=n,n=e,e=void 0),new Promise((function(o,i){try{var s=no.create(n,r);o(t(s,e,r))}catch(a){i(a)}}))}if(s<2)throw new Error("Too few arguments provided");2===s?(o=n,n=e,e=r=void 0):3===s&&(e.getContext&&void 0===o?(o=r,r=void 0):(o=r,r=n,n=e,e=void 0));try{var c=no.create(n,r);o(null,t(c,e,r))}catch(u){o(u)}}pn.create=no.create,pn.toCanvas=io.bind(null,ro.render),pn.toDataURL=io.bind(null,ro.renderToDataURL),pn.toString=io.bind(null,(function(t,e,n){return oo.render(t,n)}));var so=function(){var t=document.getSelection();if(!t.rangeCount)return function(){};for(var e=document.activeElement,n=[],r=0;r<t.rangeCount;r++)n.push(t.getRangeAt(r));switch(e.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":e.blur();break;default:e=null}return t.removeAllRanges(),function(){"Caret"===t.type&&t.removeAllRanges(),t.rangeCount||n.forEach((function(e){t.addRange(e)})),e&&e.focus()}},ao={"text/plain":"Text","text/html":"Url",default:"Text"};var co,uo,lo,ho,fo,po,mo,go=function(t,e){var n,r,o,i,s,a,c=!1;e||(e={}),n=e.debug||!1;try{if(o=so(),i=document.createRange(),s=document.getSelection(),(a=document.createElement("span")).textContent=t,a.style.all="unset",a.style.position="fixed",a.style.top=0,a.style.clip="rect(0, 0, 0, 0)",a.style.whiteSpace="pre",a.style.webkitUserSelect="text",a.style.MozUserSelect="text",a.style.msUserSelect="text",a.style.userSelect="text",a.addEventListener("copy",(function(r){if(r.stopPropagation(),e.format)if(r.preventDefault(),void 0===r.clipboardData){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var o=ao[e.format]||ao.default;window.clipboardData.setData(o,t)}else r.clipboardData.clearData(),r.clipboardData.setData(e.format,t);e.onCopy&&(r.preventDefault(),e.onCopy(r.clipboardData))})),document.body.appendChild(a),i.selectNodeContents(a),s.addRange(i),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");c=!0}catch(u){n&&console.error("unable to copy using execCommand: ",u),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(e.format||"text",t),e.onCopy&&e.onCopy(window.clipboardData),c=!0}catch(l){n&&console.error("unable to copy using clipboardData: ",l),n&&console.error("falling back to prompt"),r=function(t){var e=(/mac os x/i.test(navigator.userAgent)?"":"Ctrl")+"+C";return t.replace(/#{\s*key\s*}/g,e)}("message"in e?e.message:"Copy to clipboard: #{key}, Enter"),window.prompt(r,t)}}finally{s&&("function"==typeof s.removeRange?s.removeRange(i):s.removeAllRanges()),a&&document.body.removeChild(a),o()}return c},_o={},vo=[],wo=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord/i;function yo(t,e){for(var n in e)t[n]=e[n];return t}function bo(t){var e=t.parentNode;e&&e.removeChild(t)}function Mo(t,e,n){var r,o=arguments,i={};for(r in e)"key"!==r&&"ref"!==r&&(i[r]=e[r]);if(arguments.length>3)for(n=[n],r=3;r<arguments.length;r++)n.push(o[r]);if(null!=n&&(i.children=n),"function"==typeof t&&null!=t.defaultProps)for(r in t.defaultProps)void 0===i[r]&&(i[r]=t.defaultProps[r]);return xo(t,i,e&&e.key,e&&e.ref,null)}function xo(t,e,n,r,o){var i={type:t,props:e,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:o};return null==o&&(i.__v=i),co.vnode&&co.vnode(i),i}function ko(){return{}}function Co(t){return t.children}function So(t,e){this.props=t,this.context=e}function Eo(t,e){if(null==e)return t.__?Eo(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e)return n.__e;return"function"==typeof t.type?Eo(t):null}function Io(t){var e,n;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e){t.__e=t.__c.base=n.__e;break}return Io(t)}}function To(t){(!t.__d&&(t.__d=!0)&&uo.push(t)&&!lo++||fo!==co.debounceRendering)&&((fo=co.debounceRendering)||ho)(Ro)}function Ro(){for(var t;lo=uo.length;)t=uo.sort((function(t,e){return t.__v.__b-e.__v.__b})),uo=[],t.some((function(t){var e,n,r,o,i,s,a;t.__d&&(s=(i=(e=t).__v).__e,(a=e.__P)&&(n=[],(r=yo({},i)).__v=r,o=Lo(a,i,r,e.__n,void 0!==a.ownerSVGElement,null,n,null==s?Eo(i):s),qo(n,i),o!=s&&Io(i)))}))}function Ao(t,e,n,r,o,i,s,a,c){var u,l,h,d,f,p,m,g=n&&n.__k||vo,_=g.length;if(a==_o&&(a=null!=i?i[0]:_?Eo(n,0):null),u=0,e.__k=Oo(e.__k,(function(n){if(null!=n){if(n.__=e,n.__b=e.__b+1,null===(h=g[u])||h&&n.key==h.key&&n.type===h.type)g[u]=void 0;else for(l=0;l<_;l++){if((h=g[l])&&n.key==h.key&&n.type===h.type){g[l]=void 0;break}h=null}if(d=Lo(t,n,h=h||_o,r,o,i,s,a,c),(l=n.ref)&&h.ref!=l&&(m||(m=[]),h.ref&&m.push(h.ref,null,n),m.push(l,n.__c||d,n)),null!=d){var v;if(null==p&&(p=d),void 0!==n.__d)v=n.__d,n.__d=void 0;else if(i==h||d!=a||null==d.parentNode){t:if(null==a||a.parentNode!==t)t.appendChild(d),v=null;else{for(f=a,l=0;(f=f.nextSibling)&&l<_;l+=2)if(f==d)break t;t.insertBefore(d,a),v=a}"option"==e.type&&(t.value="")}a=void 0!==v?v:d.nextSibling,"function"==typeof e.type&&(e.__d=a)}else a&&h.__e==a&&a.parentNode!=t&&(a=Eo(h))}return u++,n})),e.__e=p,null!=i&&"function"!=typeof e.type)for(u=i.length;u--;)null!=i[u]&&bo(i[u]);for(u=_;u--;)null!=g[u]&&jo(g[u],g[u]);if(m)for(u=0;u<m.length;u++)Uo(m[u],m[++u],m[++u])}function Oo(t,e,n){if(null==n&&(n=[]),null==t||"boolean"==typeof t)e&&n.push(e(null));else if(Array.isArray(t))for(var r=0;r<t.length;r++)Oo(t[r],e,n);else n.push(e?e("string"==typeof t||"number"==typeof t?xo(null,t,null,null,t):null!=t.__e||null!=t.__c?xo(t.type,t.props,t.key,null,t.__v):t):t);return n}function No(t,e,n){"-"===e[0]?t.setProperty(e,n):t[e]="number"==typeof n&&!1===wo.test(e)?n+"px":null==n?"":n}function Bo(t,e,n,r,o){var i,s,a,c,u;if(o?"className"===e&&(e="class"):"class"===e&&(e="className"),"style"===e)if(i=t.style,"string"==typeof n)i.cssText=n;else{if("string"==typeof r&&(i.cssText="",r=null),r)for(c in r)n&&c in n||No(i,c,"");if(n)for(u in n)r&&n[u]===r[u]||No(i,u,n[u])}else"o"===e[0]&&"n"===e[1]?(s=e!==(e=e.replace(/Capture$/,"")),a=e.toLowerCase(),e=(a in t?a:e).slice(2),n?(r||t.addEventListener(e,Po,s),(t.l||(t.l={}))[e]=n):t.removeEventListener(e,Po,s)):"list"!==e&&"tagName"!==e&&"form"!==e&&"type"!==e&&"size"!==e&&!o&&e in t?t[e]=null==n?"":n:"function"!=typeof n&&"dangerouslySetInnerHTML"!==e&&(e!==(e=e.replace(/^xlink:?/,""))?null==n||!1===n?t.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):t.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),n):null==n||!1===n&&!/^ar/.test(e)?t.removeAttribute(e):t.setAttribute(e,n))}function Po(t){this.l[t.type](co.event?co.event(t):t)}function Lo(t,e,n,r,o,i,s,a,c){var u,l,h,d,f,p,m,g,_,v,w=e.type;if(void 0!==e.constructor)return null;(u=co.__b)&&u(e);try{t:if("function"==typeof w){if(g=e.props,_=(u=w.contextType)&&r[u.__c],v=u?_?_.props.value:u.__:r,n.__c?m=(l=e.__c=n.__c).__=l.__E:("prototype"in w&&w.prototype.render?e.__c=l=new w(g,v):(e.__c=l=new So(g,v),l.constructor=w,l.render=Do),_&&_.sub(l),l.props=g,l.state||(l.state={}),l.context=v,l.__n=r,h=l.__d=!0,l.__h=[]),null==l.__s&&(l.__s=l.state),null!=w.getDerivedStateFromProps&&(l.__s==l.state&&(l.__s=yo({},l.__s)),yo(l.__s,w.getDerivedStateFromProps(g,l.__s))),d=l.props,f=l.state,h)null==w.getDerivedStateFromProps&&null!=l.componentWillMount&&l.componentWillMount(),null!=l.componentDidMount&&l.__h.push(l.componentDidMount);else{if(null==w.getDerivedStateFromProps&&g!==d&&null!=l.componentWillReceiveProps&&l.componentWillReceiveProps(g,v),!l.__e&&null!=l.shouldComponentUpdate&&!1===l.shouldComponentUpdate(g,l.__s,v)||e.__v===n.__v&&!l.__){for(l.props=g,l.state=l.__s,e.__v!==n.__v&&(l.__d=!1),l.__v=e,e.__e=n.__e,e.__k=n.__k,l.__h.length&&s.push(l),u=0;u<e.__k.length;u++)e.__k[u]&&(e.__k[u].__=e);break t}null!=l.componentWillUpdate&&l.componentWillUpdate(g,l.__s,v),null!=l.componentDidUpdate&&l.__h.push((function(){l.componentDidUpdate(d,f,p)}))}l.context=v,l.props=g,l.state=l.__s,(u=co.__r)&&u(e),l.__d=!1,l.__v=e,l.__P=t,u=l.render(l.props,l.state,l.context),e.__k=null!=u&&u.type==Co&&null==u.key?u.props.children:Array.isArray(u)?u:[u],null!=l.getChildContext&&(r=yo(yo({},r),l.getChildContext())),h||null==l.getSnapshotBeforeUpdate||(p=l.getSnapshotBeforeUpdate(d,f)),Ao(t,e,n,r,o,i,s,a,c),l.base=e.__e,l.__h.length&&s.push(l),m&&(l.__E=l.__=null),l.__e=!1}else null==i&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=function(t,e,n,r,o,i,s,a){var c,u,l,h,d,f=n.props,p=e.props;if(o="svg"===e.type||o,null!=i)for(c=0;c<i.length;c++)if(null!=(u=i[c])&&((null===e.type?3===u.nodeType:u.localName===e.type)||t==u)){t=u,i[c]=null;break}if(null==t){if(null===e.type)return document.createTextNode(p);t=o?document.createElementNS("http://www.w3.org/2000/svg",e.type):document.createElement(e.type,p.is&&{is:p.is}),i=null,a=!1}if(null===e.type)f!==p&&t.data!=p&&(t.data=p);else{if(null!=i&&(i=vo.slice.call(t.childNodes)),l=(f=n.props||_o).dangerouslySetInnerHTML,h=p.dangerouslySetInnerHTML,!a){if(f===_o)for(f={},d=0;d<t.attributes.length;d++)f[t.attributes[d].name]=t.attributes[d].value;(h||l)&&(h&&l&&h.__html==l.__html||(t.innerHTML=h&&h.__html||""))}(function(t,e,n,r,o){var i;for(i in n)"children"===i||"key"===i||i in e||Bo(t,i,null,n[i],r);for(i in e)o&&"function"!=typeof e[i]||"children"===i||"key"===i||"value"===i||"checked"===i||n[i]===e[i]||Bo(t,i,e[i],n[i],r)})(t,p,f,o,a),h?e.__k=[]:(e.__k=e.props.children,Ao(t,e,n,r,"foreignObject"!==e.type&&o,i,s,_o,a)),a||("value"in p&&void 0!==(c=p.value)&&c!==t.value&&Bo(t,"value",c,f.value,!1),"checked"in p&&void 0!==(c=p.checked)&&c!==t.checked&&Bo(t,"checked",c,f.checked,!1))}return t}(n.__e,e,n,r,o,i,s,c);(u=co.diffed)&&u(e)}catch(y){e.__v=null,co.__e(y,e,n)}return e.__e}function qo(t,e){co.__c&&co.__c(e,t),t.some((function(e){try{t=e.__h,e.__h=[],t.some((function(t){t.call(e)}))}catch(n){co.__e(n,e.__v)}}))}function Uo(t,e,n){try{"function"==typeof t?t(e):t.current=e}catch(r){co.__e(r,n)}}function jo(t,e,n){var r,o,i;if(co.unmount&&co.unmount(t),(r=t.ref)&&(r.current&&r.current!==t.__e||Uo(r,null,e)),n||"function"==typeof t.type||(n=null!=(o=t.__e)),t.__e=t.__d=void 0,null!=(r=t.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(s){co.__e(s,e)}r.base=r.__P=null}if(r=t.__k)for(i=0;i<r.length;i++)r[i]&&jo(r[i],e,n);null!=o&&bo(o)}function Do(t,e,n){return this.constructor(t,n)}function Wo(t,e,n){var r,o,i;co.__&&co.__(t,e),o=(r=n===po)?null:n&&n.__k||e.__k,t=Mo(Co,null,[t]),i=[],Lo(e,(r?e:n||e).__k=t,o||_o,_o,void 0!==e.ownerSVGElement,n&&!r?[n]:o?null:vo.slice.call(e.childNodes),i,n||_o,r),qo(i,t)}function Fo(t,e){Wo(t,e,po)}function zo(t,e){var n,r;for(r in e=yo(yo({},t.props),e),arguments.length>2&&(e.children=vo.slice.call(arguments,2)),n={},e)"key"!==r&&"ref"!==r&&(n[r]=e[r]);return xo(t.type,n,e.key||t.key,e.ref||t.ref,null)}function Ho(t){var e={},n={__c:"__cC"+mo++,__:t,Consumer:function(t,e){return t.children(e)},Provider:function(t){var r,o=this;return this.getChildContext||(r=[],this.getChildContext=function(){return e[n.__c]=o,e},this.shouldComponentUpdate=function(t){o.props.value!==t.value&&r.some((function(e){e.context=t.value,To(e)}))},this.sub=function(t){r.push(t);var e=t.componentWillUnmount;t.componentWillUnmount=function(){r.splice(r.indexOf(t),1),e&&e.call(t)}}),t.children}};return n.Consumer.contextType=n,n.Provider.__=n,n}co={__e:function(t,e){for(var n,r;e=e.__;)if((n=e.__c)&&!n.__)try{if(n.constructor&&null!=n.constructor.getDerivedStateFromError&&(r=!0,n.setState(n.constructor.getDerivedStateFromError(t))),null!=n.componentDidCatch&&(r=!0,n.componentDidCatch(t)),r)return To(n.__E=n)}catch(o){t=o}throw t}},So.prototype.setState=function(t,e){var n;n=this.__s!==this.state?this.__s:this.__s=yo({},this.state),"function"==typeof t&&(t=t(n,this.props)),t&&yo(n,t),null!=t&&this.__v&&(e&&this.__h.push(e),To(this))},So.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),To(this))},So.prototype.render=Co,uo=[],lo=0,ho="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,po=_o,mo=0;var $o,Jo,Yo,Ko=0,Zo=[],Vo=co.__r,Qo=co.diffed,Xo=co.__c,Go=co.unmount;function ti(t,e){co.__h&&co.__h(Jo,t,Ko||e),Ko=0;var n=Jo.__H||(Jo.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function ei(t){return Ko=1,ni(mi,t)}function ni(t,e,n){var r=ti($o++,2);return r.__c||(r.__c=Jo,r.__=[n?n(e):mi(void 0,e),function(e){var n=t(r.__[0],e);r.__[0]!==n&&(r.__[0]=n,r.__c.setState({}))}]),r.__}function ri(t,e){var n=ti($o++,3);!co.__s&&pi(n.__H,e)&&(n.__=t,n.__H=e,Jo.__H.__h.push(n))}function oi(t,e){var n=ti($o++,4);!co.__s&&pi(n.__H,e)&&(n.__=t,n.__H=e,Jo.__h.push(n))}function ii(t){return Ko=5,ai((function(){return{current:t}}),[])}function si(t,e,n){Ko=6,oi((function(){"function"==typeof t?t(e()):t&&(t.current=e())}),null==n?n:n.concat(t))}function ai(t,e){var n=ti($o++,7);return pi(n.__H,e)?(n.__H=e,n.__h=t,n.__=t()):n.__}function ci(t,e){return Ko=8,ai((function(){return t}),e)}function ui(t){var e=Jo.context[t.__c],n=ti($o++,9);return n.__c=t,e?(null==n.__&&(n.__=!0,e.sub(Jo)),e.props.value):t.__}function li(t,e){co.useDebugValue&&co.useDebugValue(e?e(t):t)}function hi(){Zo.some((function(t){if(t.__P)try{t.__H.__h.forEach(di),t.__H.__h.forEach(fi),t.__H.__h=[]}catch(e){return t.__H.__h=[],co.__e(e,t.__v),!0}})),Zo=[]}function di(t){t.t&&t.t()}function fi(t){var e=t.__();"function"==typeof e&&(t.t=e)}function pi(t,e){return!t||e.some((function(e,n){return e!==t[n]}))}function mi(t,e){return"function"==typeof e?e(t):e}function gi(t,e){for(var n in e)t[n]=e[n];return t}function _i(t,e){for(var n in t)if("__source"!==n&&!(n in e))return!0;for(var r in e)if("__source"!==r&&t[r]!==e[r])return!0;return!1}co.__r=function(t){Vo&&Vo(t),$o=0,(Jo=t.__c).__H&&(Jo.__H.__h.forEach(di),Jo.__H.__h.forEach(fi),Jo.__H.__h=[])},co.diffed=function(t){Qo&&Qo(t);var e=t.__c;if(e){var n=e.__H;n&&n.__h.length&&(1!==Zo.push(e)&&Yo===co.requestAnimationFrame||((Yo=co.requestAnimationFrame)||function(t){var e,n=function(){clearTimeout(r),cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(n,100);"undefined"!=typeof window&&(e=requestAnimationFrame(n))})(hi))}},co.__c=function(t,e){e.some((function(t){try{t.__h.forEach(di),t.__h=t.__h.filter((function(t){return!t.__||fi(t)}))}catch(n){e.some((function(t){t.__h&&(t.__h=[])})),e=[],co.__e(n,t.__v)}})),Xo&&Xo(t,e)},co.unmount=function(t){Go&&Go(t);var e=t.__c;if(e){var n=e.__H;if(n)try{n.__.forEach((function(t){return t.t&&t.t()}))}catch(r){co.__e(r,e.__v)}}};var vi=function(t){var e,n;function r(e){var n;return(n=t.call(this,e)||this).isPureReactComponent=!0,n}return n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n,r.prototype.shouldComponentUpdate=function(t,e){return _i(this.props,t)||_i(this.state,e)},r}(So);function wi(t,e){function n(t){var n=this.props.ref,r=n==t.ref;return!r&&n&&(n.call?n(null):n.current=null),e?!e(this.props,t)||!r:_i(this.props,t)}function r(e){return this.shouldComponentUpdate=n,Mo(t,gi({},e))}return r.prototype.isReactComponent=!0,r.displayName="Memo("+(t.displayName||t.name)+")",r.t=!0,r}var yi=co.__b;function bi(t){function e(e){var n=gi({},e);return delete n.ref,t(n,e.ref)}return e.prototype.isReactComponent=e.t=!0,e.displayName="ForwardRef("+(t.displayName||t.name)+")",e}co.__b=function(t){t.type&&t.type.t&&t.ref&&(t.props.ref=t.ref,t.ref=null),yi&&yi(t)};var Mi=function(t,e){return t?Oo(t).reduce((function(t,n,r){return t.concat(e(n,r))}),[]):null},xi={map:Mi,forEach:Mi,count:function(t){return t?Oo(t).length:0},only:function(t){if(1!==(t=Oo(t)).length)throw new Error("Children.only() expects only one child.");return t[0]},toArray:Oo},ki=co.__e;function Ci(t){return t&&((t=gi({},t)).__c=null,t.__k=t.__k&&t.__k.map(Ci)),t}function Si(){this.__u=0,this.o=null,this.__b=null}function Ei(t){var e=t.__.__c;return e&&e.u&&e.u(t)}function Ii(t){var e,n,r;function o(o){if(e||(e=t()).then((function(t){n=t.default||t}),(function(t){r=t})),r)throw r;if(!n)throw e;return Mo(n,o)}return o.displayName="Lazy",o.t=!0,o}function Ti(){this.i=null,this.l=null}co.__e=function(t,e,n){if(t.then)for(var r,o=e;o=o.__;)if((r=o.__c)&&r.__c)return r.__c(t,e.__c);ki(t,e,n)},(Si.prototype=new So).__c=function(t,e){var n=this;null==n.o&&(n.o=[]),n.o.push(e);var r=Ei(n.__v),o=!1,i=function(){o||(o=!0,r?r(s):s())};e.__c=e.componentWillUnmount,e.componentWillUnmount=function(){i(),e.__c&&e.__c()};var s=function(){var t;if(!--n.__u)for(n.__v.__k[0]=n.state.u,n.setState({u:n.__b=null});t=n.o.pop();)t.forceUpdate()};n.__u++||n.setState({u:n.__b=n.__v.__k[0]}),t.then(i,i)},Si.prototype.render=function(t,e){return this.__b&&(this.__v.__k[0]=Ci(this.__b),this.__b=null),[Mo(So,null,e.u?null:t.children),e.u&&t.fallback]};var Ri=function(t,e,n){if(++n[1]===n[0]&&t.l.delete(e),t.props.revealOrder&&("t"!==t.props.revealOrder[0]||!t.l.size))for(n=t.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.i=n=n[2]}};(Ti.prototype=new So).u=function(t){var e=this,n=Ei(e.__v),r=e.l.get(t);return r[0]++,function(o){var i=function(){e.props.revealOrder?(r.push(o),Ri(e,t,r)):o()};n?n(i):i()}},Ti.prototype.render=function(t){this.i=null,this.l=new Map;var e=Oo(t.children);t.revealOrder&&"b"===t.revealOrder[0]&&e.reverse();for(var n=e.length;n--;)this.l.set(e[n],this.i=[1,0,this.i]);return t.children},Ti.prototype.componentDidUpdate=Ti.prototype.componentDidMount=function(){var t=this;t.l.forEach((function(e,n){Ri(t,n,e)}))};var Ai=function(){function t(){}var e=t.prototype;return e.getChildContext=function(){return this.props.context},e.render=function(t){return t.children},t}();function Oi(t){var e=this,n=t.container,r=Mo(Ai,{context:e.context},t.vnode);return e.s&&e.s!==n&&(e.v.parentNode&&e.s.removeChild(e.v),jo(e.h),e.p=!1),t.vnode?e.p?(n.__k=e.__k,Wo(r,n),e.__k=n.__k):(e.v=document.createTextNode(""),Fo("",n),n.appendChild(e.v),e.p=!0,e.s=n,Wo(r,n,e.v),e.__k=e.v.__k):e.p&&(e.v.parentNode&&e.s.removeChild(e.v),jo(e.h)),e.h=r,e.componentWillUnmount=function(){e.v.parentNode&&e.s.removeChild(e.v),jo(e.h)},null}function Ni(t,e){return Mo(Oi,{vnode:t,container:e})}var Bi=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/;So.prototype.isReactComponent={};var Pi="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;function Li(t,e,n){if(null==e.__k)for(;e.firstChild;)e.removeChild(e.firstChild);return Wo(t,e),"function"==typeof n&&n(),t?t.__c:null}var qi=co.event;function Ui(t,e){t["UNSAFE_"+e]&&!t[e]&&Object.defineProperty(t,e,{configurable:!1,get:function(){return this["UNSAFE_"+e]},set:function(t){this["UNSAFE_"+e]=t}})}co.event=function(t){qi&&(t=qi(t)),t.persist=function(){};var e=!1,n=!1,r=t.stopPropagation;t.stopPropagation=function(){r.call(t),e=!0};var o=t.preventDefault;return t.preventDefault=function(){o.call(t),n=!0},t.isPropagationStopped=function(){return e},t.isDefaultPrevented=function(){return n},t.nativeEvent=t};var ji={configurable:!0,get:function(){return this.class}},Di=co.vnode;co.vnode=function(t){t.$$typeof=Pi;var e=t.type,n=t.props;if(e){if(n.class!=n.className&&(ji.enumerable="className"in n,null!=n.className&&(n.class=n.className),Object.defineProperty(n,"className",ji)),"function"!=typeof e){var r,o,i;for(i in n.defaultValue&&void 0!==n.value&&(n.value||0===n.value||(n.value=n.defaultValue),delete n.defaultValue),Array.isArray(n.value)&&n.multiple&&"select"===e&&(Oo(n.children).forEach((function(t){-1!=n.value.indexOf(t.props.value)&&(t.props.selected=!0)})),delete n.value),n)if(r=Bi.test(i))break;if(r)for(i in o=t.props={},n)o[Bi.test(i)?i.replace(/[A-Z0-9]/,"-$&").toLowerCase():i]=n[i]}!function(e){var n=t.type,r=t.props;if(r&&"string"==typeof n){var o={};for(var i in r)/^on(Ani|Tra|Tou)/.test(i)&&(r[i.toLowerCase()]=r[i],delete r[i]),o[i.toLowerCase()]=i;if(o.ondoubleclick&&(r.ondblclick=r[o.ondoubleclick],delete r[o.ondoubleclick]),o.onbeforeinput&&(r.onbeforeinput=r[o.onbeforeinput],delete r[o.onbeforeinput]),o.onchange&&("textarea"===n||"input"===n.toLowerCase()&&!/^fil|che|ra/i.test(r.type))){var s=o.oninput||"oninput";r[s]||(r[s]=r[o.onchange],delete r[o.onchange])}}}(),"function"==typeof e&&!e.m&&e.prototype&&(Ui(e.prototype,"componentWillMount"),Ui(e.prototype,"componentWillReceiveProps"),Ui(e.prototype,"componentWillUpdate"),e.m=!0)}Di&&Di(t)};function Wi(t){return Mo.bind(null,t)}function Fi(t){return!!t&&t.$$typeof===Pi}function zi(t){return Fi(t)?zo.apply(null,arguments):t}function Hi(t){return!!t.__k&&(Wo(null,t),!0)}function $i(t){return t&&(t.base||1===t.nodeType&&t)||null}var Ji=function(t,e){return t(e)},Yi={useState:ei,useReducer:ni,useEffect:ri,useLayoutEffect:oi,useRef:ii,useImperativeHandle:si,useMemo:ai,useCallback:ci,useContext:ui,useDebugValue:li,version:"16.8.0",Children:xi,render:Li,hydrate:Li,unmountComponentAtNode:Hi,createPortal:Ni,createElement:Mo,createContext:Ho,createFactory:Wi,cloneElement:zi,createRef:ko,Fragment:Co,isValidElement:Fi,findDOMNode:$i,Component:So,PureComponent:vi,memo:wi,forwardRef:bi,unstable_batchedUpdates:Ji,Suspense:Si,SuspenseList:Ti,lazy:Ii},Ki=r(Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Yi,version:"16.8.0",Children:xi,render:Li,hydrate:function(t,e,n){return Fo(t,e),"function"==typeof n&&n(),t?t.__c:null},unmountComponentAtNode:Hi,createPortal:Ni,createFactory:Wi,cloneElement:zi,isValidElement:Fi,findDOMNode:$i,PureComponent:vi,memo:wi,forwardRef:bi,unstable_batchedUpdates:Ji,Suspense:Si,SuspenseList:Ti,lazy:Ii,createElement:Mo,createContext:Ho,createRef:ko,Fragment:Co,Component:So,useState:ei,useReducer:ni,useEffect:ri,useLayoutEffect:oi,useRef:ii,useImperativeHandle:si,useMemo:ai,useCallback:ci,useContext:ui,useDebugValue:li,useErrorBoundary:function(t){var e=ti($o++,10),n=ei();return e.__=t,Jo.componentDidCatch||(Jo.componentDidCatch=function(t){e.__&&e.__(t),n[1](t)}),[n[0],function(){n[1](void 0)}]}}));function Zi(t){return t&&"object"==typeof t&&"default"in t?t.default:t}var Vi=fn,Qi=Zi(pn),Xi=Zi(go),Gi=Ki;"undefined"==typeof Symbol||(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"==typeof Symbol||(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));function ts(t){return Gi.createElement("div",{className:"walletconnect-modal__header"},Gi.createElement("img",{src:"data:image/svg+xml,%3C?xml version='1.0' encoding='UTF-8'?%3E %3Csvg width='300px' height='185px' viewBox='0 0 300 185' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E %3C!-- Generator: Sketch 49.3 (51167) - http://www.bohemiancoding.com/sketch --%3E %3Ctitle%3EWalletConnect%3C/title%3E %3Cdesc%3ECreated with Sketch.%3C/desc%3E %3Cdefs%3E%3C/defs%3E %3Cg id='Page-1' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E %3Cg id='walletconnect-logo-alt' fill='%233B99FC' fill-rule='nonzero'%3E %3Cpath d='M61.4385429,36.2562612 C110.349767,-11.6319051 189.65053,-11.6319051 238.561752,36.2562612 L244.448297,42.0196786 C246.893858,44.4140867 246.893858,48.2961898 244.448297,50.690599 L224.311602,70.406102 C223.088821,71.6033071 221.106302,71.6033071 219.883521,70.406102 L211.782937,62.4749541 C177.661245,29.0669724 122.339051,29.0669724 88.2173582,62.4749541 L79.542302,70.9685592 C78.3195204,72.1657633 76.337001,72.1657633 75.1142214,70.9685592 L54.9775265,51.2530561 C52.5319653,48.8586469 52.5319653,44.9765439 54.9775265,42.5821357 L61.4385429,36.2562612 Z M280.206339,77.0300061 L298.128036,94.5769031 C300.573585,96.9713 300.573599,100.85338 298.128067,103.247793 L217.317896,182.368927 C214.872352,184.763353 210.907314,184.76338 208.461736,182.368989 C208.461726,182.368979 208.461714,182.368967 208.461704,182.368957 L151.107561,126.214385 C150.496171,125.615783 149.504911,125.615783 148.893521,126.214385 C148.893517,126.214389 148.893514,126.214393 148.89351,126.214396 L91.5405888,182.368927 C89.095052,184.763359 85.1300133,184.763399 82.6844276,182.369014 C82.6844133,182.369 82.684398,182.368986 82.6843827,182.36897 L1.87196327,103.246785 C-0.573596939,100.852377 -0.573596939,96.9702735 1.87196327,94.5758653 L19.7936929,77.028998 C22.2392531,74.6345898 26.2042918,74.6345898 28.6498531,77.028998 L86.0048306,133.184355 C86.6162214,133.782957 87.6074796,133.782957 88.2188704,133.184355 C88.2188796,133.184346 88.2188878,133.184338 88.2188969,133.184331 L145.571,77.028998 C148.016505,74.6345347 151.981544,74.6344449 154.427161,77.028798 C154.427195,77.0288316 154.427229,77.0288653 154.427262,77.028899 L211.782164,133.184331 C212.393554,133.782932 213.384814,133.782932 213.996204,133.184331 L271.350179,77.0300061 C273.79574,74.6355969 277.760778,74.6355969 280.206339,77.0300061 Z' id='WalletConnect'%3E%3C/path%3E %3C/g%3E %3C/g%3E %3C/svg%3E",className:"walletconnect-modal__headerLogo"}),Gi.createElement("p",null,"WalletConnect"),Gi.createElement("div",{className:"walletconnect-modal__close__wrapper",onClick:t.onClose},Gi.createElement("div",{id:"walletconnect-qrcode-close",className:"walletconnect-modal__close__icon"},Gi.createElement("div",{className:"walletconnect-modal__close__line1"}),Gi.createElement("div",{className:"walletconnect-modal__close__line2"}))))}function es(t){return Gi.createElement("a",{className:"walletconnect-connect__button",href:t.href,id:"walletconnect-connect-button-"+t.name,onClick:t.onClick,rel:"noopener noreferrer",style:{backgroundColor:t.color},target:"_blank"},t.name)}function ns(t){var e=t.color,n=t.href,r=t.name,o=t.logo,i=t.onClick;return Gi.createElement("a",{className:"walletconnect-modal__base__row",href:n,onClick:i,rel:"noopener noreferrer",target:"_blank"},Gi.createElement("h3",{className:"walletconnect-modal__base__row__h3"},r),Gi.createElement("div",{className:"walletconnect-modal__base__row__right"},Gi.createElement("div",{className:"walletconnect-modal__base__row__right__app-icon",style:{background:"url('"+o+"') "+e,backgroundSize:"100%"}}),Gi.createElement("img",{src:"data:image/svg+xml,%3Csvg width='8' height='18' viewBox='0 0 8 18' fill='none' xmlns='http://www.w3.org/2000/svg'%3E %3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M0.586301 0.213898C0.150354 0.552968 0.0718197 1.18124 0.41089 1.61719L5.2892 7.88931C5.57007 8.25042 5.57007 8.75608 5.2892 9.11719L0.410889 15.3893C0.071819 15.8253 0.150353 16.4535 0.586301 16.7926C1.02225 17.1317 1.65052 17.0531 1.98959 16.6172L6.86791 10.3451C7.7105 9.26174 7.7105 7.74476 6.86791 6.66143L1.98959 0.38931C1.65052 -0.0466374 1.02225 -0.125172 0.586301 0.213898Z' fill='%233C4252'/%3E %3C/svg%3E",className:"walletconnect-modal__base__row__right__caret"})))}function rs(t){var e=t.color,n=t.href,r=t.name,o=t.logo,i=t.onClick,s=window.innerWidth<768?(r.length>8?2.5:2.7)+"vw":"inherit";return Gi.createElement("a",{className:"walletconnect-connect__button__icon_anchor",href:n,onClick:i,rel:"noopener noreferrer",target:"_blank"},Gi.createElement("div",{className:"walletconnect-connect__button__icon",style:{background:"url('"+o+"') "+e,backgroundSize:"100%"}}),Gi.createElement("div",{style:{fontSize:s},className:"walletconnect-connect__button__text"},r))}function os(t){var e=Vi.isAndroid(),n=Gi.useState(1),r=n[0],o=n[1],i=t.links,s=t.errorMessage,a=i.length>5,c=Math.ceil(i.length/12),u=[12*(r-1)+1,12*r],l=i.length?i.filter((function(t,e){return e+1>=u[0]&&e+1<=u[1]})):[];return Gi.createElement("div",null,Gi.createElement("p",{id:"walletconnect-qrcode-text",className:"walletconnect-qrcode__text"},e?t.text.connect_mobile_wallet:t.text.choose_preferred_wallet),Gi.createElement("div",{className:"walletconnect-connect__buttons__wrapper"+(e?"__android":a?"__wrap":"")},e?Gi.createElement(es,{name:t.text.connect,color:"rgb(64, 153, 255)",href:t.uri,onClick:Gi.useCallback((function(){Vi.saveMobileLinkInfo({name:"Unknown",href:t.uri})}),[])}):l.length?l.map((function(e){var n=e.color,r=e.name,o=e.shortName,i=e.logo,s=Vi.formatIOSMobile(t.uri,e),c=Gi.useCallback((function(){Vi.saveMobileLinkInfo({name:r,href:s})}),[l]);return a?Gi.createElement(rs,{color:n,href:s,name:o,logo:i,onClick:c}):Gi.createElement(ns,{color:n,href:s,name:r,logo:i,onClick:c})})):Gi.createElement(Gi.Fragment,null,Gi.createElement("p",null,s.length?t.errorMessage:t.text.loading))),!(e||!(c>1))&&Gi.createElement("div",{className:"walletconnect-modal__footer"},Array(c).fill(0).map((function(t,e){var n=e+1,i=r===n;return Gi.createElement("a",{style:{margin:"auto 10px",fontWeight:i?"bold":"normal"},onClick:function(){return o(n)}},n)}))))}function is(t){var e=!!t.message.trim();return Gi.createElement("div",{className:"walletconnect-qrcode__notification"+(e?" notification__show":"")},t.message)}function ss(t){var e=Gi.useState(""),n=e[0],r=e[1],o=Gi.useState(""),i=o[0],s=o[1];Gi.useEffect((function(){try{return Promise.resolve(function(t){try{var e="";return Promise.resolve(Qi.toString(t,{margin:0,type:"svg"})).then((function(t){return"string"==typeof t&&(e=t.replace("<svg",'<svg class="walletconnect-qrcode__image"')),e}))}catch(n){return Promise.reject(n)}}(t.uri)).then((function(t){s(t)}))}catch(e){Promise.reject(e)}}),[]);return Gi.createElement("div",null,Gi.createElement("p",{id:"walletconnect-qrcode-text",className:"walletconnect-qrcode__text"},t.text.scan_qrcode_with_wallet),Gi.createElement("div",{dangerouslySetInnerHTML:{__html:i}}),Gi.createElement("div",{className:"walletconnect-modal__footer"},Gi.createElement("a",{onClick:function(){Xi(t.uri)?(r(t.text.copied_to_clipboard),setInterval((function(){return r("")}),1200)):(r("Error"),setInterval((function(){return r("")}),1200))}},t.text.copy_to_clipboard)),Gi.createElement(is,{message:n}))}function as(t){var e=Vi.isAndroid(),n=Vi.isMobile(),r=n?t.qrcodeModalOptions&&t.qrcodeModalOptions.mobileLinks?t.qrcodeModalOptions.mobileLinks:void 0:t.qrcodeModalOptions&&t.qrcodeModalOptions.desktopLinks?t.qrcodeModalOptions.desktopLinks:void 0,o=Gi.useState(!1),i=o[0],s=o[1],a=Gi.useState(!1),c=a[0],u=a[1],l=Gi.useState(!n),h=l[0],d=l[1],f={mobile:n,text:t.text,uri:t.uri,qrcodeModalOptions:t.qrcodeModalOptions},p=Gi.useState(""),m=p[0],g=p[1],_=Gi.useState(!1),v=_[0],w=_[1],y=Gi.useState([]),b=y[0],M=y[1],x=Gi.useState(""),k=x[0],C=x[1],S=function(){c||i||r&&!r.length||b.length>0||Gi.useEffect((function(){!function(){try{if(e)return Promise.resolve();s(!0);var o=function(t,e){try{var n=t()}catch(r){return e(r)}return n&&n.then?n.then(void 0,e):n}((function(){var e=t.qrcodeModalOptions&&t.qrcodeModalOptions.registryUrl?t.qrcodeModalOptions.registryUrl:Vi.getWalletRegistryUrl();return Promise.resolve(fetch(e).then((function(t){return t.json()}))).then((function(e){var o=n?"mobile":"desktop",i=Vi.getMobileLinkRegistry(Vi.formatMobileRegistry(e,o),r);s(!1),u(!0),C(i.length?"":t.text.no_supported_wallets),M(i);var a=1===i.length;a&&(g(Vi.formatIOSMobile(t.uri,i[0])),d(!0)),w(a)}))}),(function(e){s(!1),u(!0),C(t.text.something_went_wrong),console.error(e)}));Promise.resolve(o&&o.then?o.then((function(){})):void 0)}catch(i){return Promise.reject(i)}}()}))};S();var E=n?h:!h;return Gi.createElement("div",{id:"walletconnect-qrcode-modal",className:"walletconnect-qrcode__base animated fadeIn"},Gi.createElement("div",{className:"walletconnect-modal__base"},Gi.createElement(ts,{onClose:t.onClose}),v&&h?Gi.createElement("div",{className:"walletconnect-modal__single_wallet"},Gi.createElement("a",{onClick:function(){return Vi.saveMobileLinkInfo({name:b[0].name,href:m})},href:m,rel:"noopener noreferrer",target:"_blank"},t.text.connect_with+" "+(v?b[0].name:"")+" ")):e||i||!i&&b.length?Gi.createElement("div",{className:"walletconnect-modal__mobile__toggle"+(E?" right__selected":"")},Gi.createElement("div",{className:"walletconnect-modal__mobile__toggle_selector"}),n?Gi.createElement(Gi.Fragment,null,Gi.createElement("a",{onClick:function(){return d(!1),S()}},t.text.mobile),Gi.createElement("a",{onClick:function(){return d(!0)}},t.text.qrcode)):Gi.createElement(Gi.Fragment,null,Gi.createElement("a",{onClick:function(){return d(!0)}},t.text.qrcode),Gi.createElement("a",{onClick:function(){return d(!1),S()}},t.text.desktop))):null,Gi.createElement("div",null,h||!e&&!i&&!b.length?Gi.createElement(ss,Object.assign({},f)):Gi.createElement(os,Object.assign({},f,{links:b,errorMessage:k})))))}var cs={de:{choose_preferred_wallet:"Whle bevorzugte Wallet",connect_mobile_wallet:"Verbinde mit Mobile Wallet",scan_qrcode_with_wallet:"Scanne den QR-code mit einer WalletConnect kompatiblen Wallet",connect:"Verbinden",qrcode:"QR-Code",mobile:"Mobile",desktop:"Desktop",copy_to_clipboard:"In die Zwischenablage kopieren",copied_to_clipboard:"In die Zwischenablage kopiert!",connect_with:"Verbinden mit Hilfe von",loading:"Laden...",something_went_wrong:"Etwas ist schief gelaufen",no_supported_wallets:"Es gibt noch keine untersttzten Geldbrsen"},en:{choose_preferred_wallet:"Choose your preferred wallet",connect_mobile_wallet:"Connect to Mobile Wallet",scan_qrcode_with_wallet:"Scan QR code with a WalletConnect-compatible wallet",connect:"Connect",qrcode:"QR Code",mobile:"Mobile",desktop:"Desktop",copy_to_clipboard:"Copy to clipboard",copied_to_clipboard:"Copied to clipboard!",connect_with:"Connect with",loading:"Loading...",something_went_wrong:"Something went wrong",no_supported_wallets:"There are no supported wallets yet"},es:{choose_preferred_wallet:"Elige tu billetera preferida",connect_mobile_wallet:"Conectar a billetera mvil",scan_qrcode_with_wallet:"Escanea el cdigo QR con una billetera compatible con WalletConnect",connect:"Conectar",qrcode:"Cdigo QR",mobile:"Mvil",desktop:"Desktop",copy_to_clipboard:"Copiar",copied_to_clipboard:"Copiado!",connect_with:"Conectar mediante",loading:"Cargando...",something_went_wrong:"Algo sali mal",no_supported_wallets:"Todava no hay monederos compatibles"},fr:{choose_preferred_wallet:"Choisissez votre portefeuille prfr",connect_mobile_wallet:"Se connecter au portefeuille mobile",scan_qrcode_with_wallet:"Scannez le QR code avec un portefeuille compatible WalletConnect",connect:"Se connecter",qrcode:"QR Code",mobile:"Mobile",desktop:"Desktop",copy_to_clipboard:"Copier",copied_to_clipboard:"Copi!",connect_with:"Connectez-vous  l'aide de",loading:"Chargement...",something_went_wrong:"Quelque chose a mal tourn",no_supported_wallets:"Il n'y a pas encore de portefeuilles pris en charge"},ko:{choose_preferred_wallet:"  ",connect_mobile_wallet:"  ",scan_qrcode_with_wallet:"WalletConnect   QR ",connect:"",qrcode:"QR ",mobile:"",desktop:"",copy_to_clipboard:" ",copied_to_clipboard:" !",connect_with:" ",loading:" ...",something_went_wrong:" .",no_supported_wallets:"   "},pt:{choose_preferred_wallet:"Escolha sua carteira preferida",connect_mobile_wallet:"Conectar-se  carteira mvel",scan_qrcode_with_wallet:"Ler o cdigo QR com uma carteira compatvel com WalletConnect",connect:"Conectar",qrcode:"Cdigo QR",mobile:"Mvel",desktop:"Desktop",copy_to_clipboard:"Copiar",copied_to_clipboard:"Copiado!",connect_with:"Ligar por meio de",loading:"Carregamento...",something_went_wrong:"Algo correu mal",no_supported_wallets:"Ainda no h carteiras suportadas"},zh:{choose_preferred_wallet:"",connect_mobile_wallet:"",scan_qrcode_with_wallet:" WalletConnect ",connect:"",qrcode:"",mobile:"",desktop:"",copy_to_clipboard:"",copied_to_clipboard:"",connect_with:"",loading:"...",something_went_wrong:"",no_supported_wallets:""},fa:{choose_preferred_wallet:"       ",connect_mobile_wallet:"     ",scan_qrcode_with_wallet:" QR        WalletConnect  ",connect:"",qrcode:" QR",mobile:"",desktop:"",copy_to_clipboard:"   ",copied_to_clipboard:"    !",connect_with:" ",loading:"...",something_went_wrong:"  ",no_supported_wallets:"        "}};function us(){var t=Vi.getDocumentOrThrow(),e=t.getElementById("walletconnect-qrcode-modal");e&&(e.className=e.className.replace("fadeIn","fadeOut"),setTimeout((function(){var e=t.getElementById("walletconnect-wrapper");e&&t.body.removeChild(e)}),300))}function ls(t){return function(){us(),t&&t()}}function hs(t,e,n){!function(){var t=Vi.getDocumentOrThrow(),e=t.getElementById("walletconnect-style-sheet");e&&t.head.removeChild(e);var n=t.createElement("style");n.setAttribute("id","walletconnect-style-sheet"),n.innerText=':root {\n  --animation-duration: 300ms;\n}\n\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n\n@keyframes fadeOut {\n  from {\n    opacity: 1;\n  }\n  to {\n    opacity: 0;\n  }\n}\n\n.animated {\n  animation-duration: var(--animation-duration);\n  animation-fill-mode: both;\n}\n\n.fadeIn {\n  animation-name: fadeIn;\n}\n\n.fadeOut {\n  animation-name: fadeOut;\n}\n\n#walletconnect-wrapper {\n  -webkit-user-select: none;\n  align-items: center;\n  display: flex;\n  height: 100%;\n  justify-content: center;\n  left: 0;\n  pointer-events: none;\n  position: fixed;\n  top: 0;\n  user-select: none;\n  width: 100%;\n  z-index: 99999999999999;\n}\n\n.walletconnect-modal__headerLogo {\n  height: 21px;\n}\n\n.walletconnect-modal__header p {\n  color: #ffffff;\n  font-size: 20px;\n  font-weight: 600;\n  margin: 0;\n  align-items: flex-start;\n  display: flex;\n  flex: 1;\n  margin-left: 5px;\n}\n\n.walletconnect-modal__close__wrapper {\n  position: absolute;\n  top: 0px;\n  right: 0px;\n  z-index: 10000;\n  background: white;\n  border-radius: 26px;\n  padding: 6px;\n  box-sizing: border-box;\n  width: 26px;\n  height: 26px;\n  cursor: pointer;\n}\n\n.walletconnect-modal__close__icon {\n  position: relative;\n  top: 7px;\n  right: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transform: rotate(45deg);\n}\n\n.walletconnect-modal__close__line1 {\n  position: absolute;\n  width: 100%;\n  border: 1px solid rgb(48, 52, 59);\n}\n\n.walletconnect-modal__close__line2 {\n  position: absolute;\n  width: 100%;\n  border: 1px solid rgb(48, 52, 59);\n  transform: rotate(90deg);\n}\n\n.walletconnect-qrcode__base {\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n  background: rgba(37, 41, 46, 0.95);\n  height: 100%;\n  left: 0;\n  pointer-events: auto;\n  position: fixed;\n  top: 0;\n  transition: 0.4s cubic-bezier(0.19, 1, 0.22, 1);\n  width: 100%;\n  will-change: opacity;\n  padding: 40px;\n  box-sizing: border-box;\n}\n\n.walletconnect-qrcode__text {\n  color: rgba(60, 66, 82, 0.6);\n  font-size: 16px;\n  font-weight: 600;\n  letter-spacing: 0;\n  line-height: 1.1875em;\n  margin: 10px 0 30px 0;\n  text-align: center;\n  width: 100%;\n}\n\n@media only screen and (max-width: 768px) {\n  .walletconnect-qrcode__text {\n    font-size: 4vw;\n  }\n}\n\n@media only screen and (max-width: 320px) {\n  .walletconnect-qrcode__text {\n    font-size: 14px;\n  }\n}\n\n.walletconnect-qrcode__image {\n  width: calc(100% - 30px);\n  box-sizing: border-box;\n  cursor: none;\n  margin: 0 auto;\n}\n\n.walletconnect-qrcode__notification {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  font-size: 16px;\n  padding: 16px 20px;\n  border-radius: 16px;\n  text-align: center;\n  transition: all 0.1s ease-in-out;\n  background: white;\n  color: black;\n  margin-bottom: -60px;\n  opacity: 0;\n}\n\n.walletconnect-qrcode__notification.notification__show {\n  opacity: 1;\n}\n\n@media only screen and (max-width: 768px) {\n  .walletconnect-modal__header {\n    height: 130px;\n  }\n  .walletconnect-modal__base {\n    overflow: auto;\n  }\n}\n\n@media only screen and (min-device-width: 415px) and (max-width: 768px) {\n  #content {\n    max-width: 768px;\n    box-sizing: border-box;\n  }\n}\n\n@media only screen and (min-width: 375px) and (max-width: 415px) {\n  #content {\n    max-width: 414px;\n    box-sizing: border-box;\n  }\n}\n\n@media only screen and (min-width: 320px) and (max-width: 375px) {\n  #content {\n    max-width: 375px;\n    box-sizing: border-box;\n  }\n}\n\n@media only screen and (max-width: 320px) {\n  #content {\n    max-width: 320px;\n    box-sizing: border-box;\n  }\n}\n\n.walletconnect-modal__base {\n  -webkit-font-smoothing: antialiased;\n  background: #ffffff;\n  border-radius: 24px;\n  box-shadow: 0 10px 50px 5px rgba(0, 0, 0, 0.4);\n  font-family: ui-rounded, "SF Pro Rounded", "SF Pro Text", medium-content-sans-serif-font,\n    -apple-system, BlinkMacSystemFont, ui-sans-serif, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell,\n    "Open Sans", "Helvetica Neue", sans-serif;\n  margin-top: 41px;\n  padding: 24px 24px 22px;\n  pointer-events: auto;\n  position: relative;\n  text-align: center;\n  transition: 0.4s cubic-bezier(0.19, 1, 0.22, 1);\n  will-change: transform;\n  overflow: visible;\n  transform: translateY(-50%);\n  top: 50%;\n  max-width: 500px;\n  margin: auto;\n}\n\n@media only screen and (max-width: 320px) {\n  .walletconnect-modal__base {\n    padding: 24px 12px;\n  }\n}\n\n.walletconnect-modal__base .hidden {\n  transform: translateY(150%);\n  transition: 0.125s cubic-bezier(0.4, 0, 1, 1);\n}\n\n.walletconnect-modal__header {\n  align-items: center;\n  display: flex;\n  height: 26px;\n  left: 0;\n  justify-content: space-between;\n  position: absolute;\n  top: -42px;\n  width: 100%;\n}\n\n.walletconnect-modal__base .wc-logo {\n  align-items: center;\n  display: flex;\n  height: 26px;\n  margin-top: 15px;\n  padding-bottom: 15px;\n  pointer-events: auto;\n}\n\n.walletconnect-modal__base .wc-logo div {\n  background-color: #3399ff;\n  height: 21px;\n  margin-right: 5px;\n  mask-image: url("images/wc-logo.svg") center no-repeat;\n  width: 32px;\n}\n\n.walletconnect-modal__base .wc-logo p {\n  color: #ffffff;\n  font-size: 20px;\n  font-weight: 600;\n  margin: 0;\n}\n\n.walletconnect-modal__base h2 {\n  color: rgba(60, 66, 82, 0.6);\n  font-size: 16px;\n  font-weight: 600;\n  letter-spacing: 0;\n  line-height: 1.1875em;\n  margin: 0 0 19px 0;\n  text-align: center;\n  width: 100%;\n}\n\n.walletconnect-modal__base__row {\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n  align-items: center;\n  border-radius: 20px;\n  cursor: pointer;\n  display: flex;\n  height: 56px;\n  justify-content: space-between;\n  padding: 0 15px;\n  position: relative;\n  margin: 0px 0px 8px;\n  text-align: left;\n  transition: 0.15s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n  will-change: transform;\n  text-decoration: none;\n}\n\n.walletconnect-modal__base__row:hover {\n  background: rgba(60, 66, 82, 0.06);\n}\n\n.walletconnect-modal__base__row:active {\n  background: rgba(60, 66, 82, 0.06);\n  transform: scale(0.975);\n  transition: 0.1s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n}\n\n.walletconnect-modal__base__row__h3 {\n  color: #25292e;\n  font-size: 20px;\n  font-weight: 700;\n  margin: 0;\n  padding-bottom: 3px;\n}\n\n.walletconnect-modal__base__row__right {\n  align-items: center;\n  display: flex;\n  justify-content: center;\n}\n\n.walletconnect-modal__base__row__right__app-icon {\n  border-radius: 8px;\n  height: 34px;\n  margin: 0 11px 2px 0;\n  width: 34px;\n  background-size: 100%;\n  box-shadow: 0 4px 12px 0 rgba(37, 41, 46, 0.25);\n}\n\n.walletconnect-modal__base__row__right__caret {\n  height: 18px;\n  opacity: 0.3;\n  transition: 0.1s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n  width: 8px;\n  will-change: opacity;\n}\n\n.walletconnect-modal__base__row:hover .caret,\n.walletconnect-modal__base__row:active .caret {\n  opacity: 0.6;\n}\n\n.walletconnect-modal__mobile__toggle {\n  width: 80%;\n  display: flex;\n  margin: 0 auto;\n  position: relative;\n  overflow: hidden;\n  border-radius: 8px;\n  margin-bottom: 18px;\n  background: #d4d5d9;\n}\n\n.walletconnect-modal__single_wallet {\n  display: flex;\n  justify-content: center;\n  margin-top: 7px;\n  margin-bottom: 18px;\n}\n\n.walletconnect-modal__single_wallet a {\n  cursor: pointer;\n  color: rgb(64, 153, 255);\n  font-size: 21px;\n  font-weight: 800;\n  text-decoration: none !important;\n  margin: 0 auto;\n}\n\n.walletconnect-modal__mobile__toggle_selector {\n  width: calc(50% - 8px);\n  background: white;\n  position: absolute;\n  border-radius: 5px;\n  height: calc(100% - 8px);\n  top: 4px;\n  transition: all 0.2s ease-in-out;\n  transform: translate3d(4px, 0, 0);\n}\n\n.walletconnect-modal__mobile__toggle.right__selected .walletconnect-modal__mobile__toggle_selector {\n  transform: translate3d(calc(100% + 12px), 0, 0);\n}\n\n.walletconnect-modal__mobile__toggle a {\n  font-size: 12px;\n  width: 50%;\n  text-align: center;\n  padding: 8px;\n  margin: 0;\n  font-weight: 600;\n  z-index: 1;\n}\n\n.walletconnect-modal__footer {\n  display: flex;\n  justify-content: center;\n  margin-top: 20px;\n}\n\n@media only screen and (max-width: 768px) {\n  .walletconnect-modal__footer {\n    margin-top: 5vw;\n  }\n}\n\n.walletconnect-modal__footer a {\n  cursor: pointer;\n  color: #898d97;\n  font-size: 15px;\n  margin: 0 auto;\n}\n\n@media only screen and (max-width: 320px) {\n  .walletconnect-modal__footer a {\n    font-size: 14px;\n  }\n}\n\n.walletconnect-connect__buttons__wrapper {\n  max-height: 44vh;\n}\n\n.walletconnect-connect__buttons__wrapper__android {\n  margin: 50% 0;\n}\n\n.walletconnect-connect__buttons__wrapper__wrap {\n  display: grid;\n  grid-template-columns: repeat(4, 1fr);\n  margin-top: 20px;\n  margin-bottom: 10px;\n}\n\n@media only screen and (min-width: 768px) {\n  .walletconnect-connect__buttons__wrapper__wrap {\n    margin-top: 40px;\n  }\n}\n\n.walletconnect-connect__button {\n  background-color: rgb(64, 153, 255);\n  padding: 12px;\n  border-radius: 8px;\n  text-decoration: none;\n  color: rgb(255, 255, 255);\n  font-weight: 500;\n}\n\n.walletconnect-connect__button__icon_anchor {\n  cursor: pointer;\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  margin: 8px;\n  width: 42px;\n  justify-self: center;\n  flex-direction: column;\n  text-decoration: none !important;\n}\n\n@media only screen and (max-width: 320px) {\n  .walletconnect-connect__button__icon_anchor {\n    margin: 4px;\n  }\n}\n\n.walletconnect-connect__button__icon {\n  border-radius: 10px;\n  height: 42px;\n  margin: 0;\n  width: 42px;\n  background-size: cover !important;\n  box-shadow: 0 4px 12px 0 rgba(37, 41, 46, 0.25);\n}\n\n.walletconnect-connect__button__text {\n  color: #424952;\n  font-size: 2.7vw;\n  text-decoration: none !important;\n  padding: 0;\n  margin-top: 1.8vw;\n  font-weight: 600;\n}\n\n@media only screen and (min-width: 768px) {\n  .walletconnect-connect__button__text {\n    font-size: 16px;\n    margin-top: 12px;\n  }\n}\n',t.head.appendChild(n)}();var r,o=function(){var t=Vi.getDocumentOrThrow(),e=t.createElement("div");return e.setAttribute("id","walletconnect-wrapper"),t.body.appendChild(e),e}();Gi.render(Gi.createElement(as,{text:(r=Vi.getNavigatorOrThrow().language.split("-")[0]||"en",cs[r]||cs.en),uri:t,onClose:ls(e),qrcodeModalOptions:n}),o)}var ds=function(){return"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node};var fs={open:function(t,e,n){console.log(t),ds()?function(t){Qi.toString(t,{type:"terminal"}).then(console.log)}(t):hs(t,e,n)},close:function(){ds()||us()}},ps={exports:{}};!function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}function o(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function i(t,e,r,i,s){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new o(r,i||t,s),c=n?n+e:e;return t._events[c]?t._events[c].fn?t._events[c]=[t._events[c],a]:t._events[c].push(a):(t._events[c]=a,t._eventsCount++),t}function s(t,e){0==--t._eventsCount?t._events=new r:delete t._events[e]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),a.prototype.eventNames=function(){var t,r,o=[];if(0===this._eventsCount)return o;for(r in t=this._events)e.call(t,r)&&o.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(t)):o},a.prototype.listeners=function(t){var e=n?n+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,i=r.length,s=new Array(i);o<i;o++)s[o]=r[o].fn;return s},a.prototype.listenerCount=function(t){var e=n?n+t:t,r=this._events[e];return r?r.fn?1:r.length:0},a.prototype.emit=function(t,e,r,o,i,s){var a=n?n+t:t;if(!this._events[a])return!1;var c,u,l=this._events[a],h=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,r),!0;case 4:return l.fn.call(l.context,e,r,o),!0;case 5:return l.fn.call(l.context,e,r,o,i),!0;case 6:return l.fn.call(l.context,e,r,o,i,s),!0}for(u=1,c=new Array(h-1);u<h;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var d,f=l.length;for(u=0;u<f;u++)switch(l[u].once&&this.removeListener(t,l[u].fn,void 0,!0),h){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,e);break;case 3:l[u].fn.call(l[u].context,e,r);break;case 4:l[u].fn.call(l[u].context,e,r,o);break;default:if(!c)for(d=1,c=new Array(h-1);d<h;d++)c[d-1]=arguments[d];l[u].fn.apply(l[u].context,c)}}return!0},a.prototype.on=function(t,e,n){return i(this,t,e,n,!1)},a.prototype.once=function(t,e,n){return i(this,t,e,n,!0)},a.prototype.removeListener=function(t,e,r,o){var i=n?n+t:t;if(!this._events[i])return this;if(!e)return s(this,i),this;var a=this._events[i];if(a.fn)a.fn!==e||o&&!a.once||r&&a.context!==r||s(this,i);else{for(var c=0,u=[],l=a.length;c<l;c++)(a[c].fn!==e||o&&!a[c].once||r&&a[c].context!==r)&&u.push(a[c]);u.length?this._events[i]=1===u.length?u[0]:u:s(this,i)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&s(this,e)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a}(ps);var ms=ps.exports;const gs=W("XMLHttpRequest")||i.XMLHttpRequest;class _s extends ms{constructor(t){super(),this.url=t}formatError(t,e,n=-1){return{error:{message:e,code:n},id:t.id,jsonrpc:t.jsonrpc}}send(t,e){return new Promise((n=>{if("eth_subscribe"===t.method){const e=this.formatError(t,"Subscriptions are not supported by this HTTP endpoint");return this.emit("error",e),n(e)}const r=new gs;let o=!1;const i=(i,s)=>{if(!o)if(r.abort(),o=!0,e)e(i,s);else{const{id:e,jsonrpc:r}=t,o=i?{id:e,jsonrpc:r,error:{message:i.message,code:i.code}}:{id:e,jsonrpc:r,result:s};this.emit("payload",o),n(o)}};r.open("POST",this.url,!0),r.setRequestHeader("Content-Type","application/json"),r.timeout=6e4,r.onerror=i,r.ontimeout=i,r.onreadystatechange=()=>{if(4===r.readyState)try{const t=JSON.parse(r.responseText);i(t.error,t.result)}catch(t){i(t)}},r.send(JSON.stringify(t))}))}}const vs=require("web3-provider-engine"),ws=require("web3-provider-engine/subproviders/cache"),ys=require("web3-provider-engine/subproviders/fixture"),bs=require("web3-provider-engine/subproviders/filters"),Ms=require("web3-provider-engine/subproviders/hooked-wallet"),xs=require("web3-provider-engine/subproviders/nonce-tracker"),ks=require("web3-provider-engine/subproviders/subscriptions");class Cs extends vs{constructor(t){if(super({pollingInterval:t.pollingInterval||8e3}),this.bridge="https://bridge.walletconnect.org",this.qrcode=!0,this.qrcodeModal=fs,this.qrcodeModalOptions=void 0,this.rpc=null,this.infuraId="",this.http=null,this.isConnecting=!1,this.connected=!1,this.connectCallbacks=[],this.accounts=[],this.chainId=1,this.rpcUrl="",this.enable=async()=>{const t=await this.getWalletConnector();if(t)return this.start(),this.subscribeWalletConnector(),t.accounts;throw new Error("Failed to connect to WalleConnect")},this.request=async t=>this.send(t),this.send=async(t,e)=>{if("string"==typeof t){const n=t;let r=e;return"personal_sign"===n&&(r=je(r)),this.sendAsyncPromise(n,r)}if("personal_sign"===(t=Object.assign({id:Ae(),jsonrpc:"2.0"},t)).method&&(t.params=je(t.params)),!e)return this.sendAsyncPromise(t.method,t.params);this.sendAsync(t,e)},this.onConnect=t=>{this.connectCallbacks.push(t)},this.triggerConnect=t=>{this.connectCallbacks&&this.connectCallbacks.length&&this.connectCallbacks.forEach((e=>e(t)))},this.bridge=t.connector?t.connector.bridge:t.bridge||"https://bridge.walletconnect.org",this.qrcode=void 0===t.qrcode||!1!==t.qrcode,this.qrcodeModal=t.qrcodeModal||this.qrcodeModal,this.qrcodeModalOptions=t.qrcodeModalOptions,this.wc=t.connector||new dn({bridge:this.bridge,qrcodeModal:this.qrcode?this.qrcodeModal:void 0,qrcodeModalOptions:this.qrcodeModalOptions,storageId:null==t?void 0:t.storageId,signingMethods:null==t?void 0:t.signingMethods,clientMeta:null==t?void 0:t.clientMeta}),this.rpc=t.rpc||null,!(this.rpc||t.infuraId&&"string"==typeof t.infuraId&&t.infuraId.trim()))throw new Error("Missing one of the required parameters: rpc or infuraId");this.infuraId=t.infuraId||"",this.chainId=(null==t?void 0:t.chainId)||this.chainId,this.initialize()}get isWalletConnect(){return!0}get connector(){return this.wc}get walletMeta(){return this.wc.peerMeta}async disconnect(){this.close()}async close(){const t=await this.getWalletConnector({disableSessionCreation:!0});await t.killSession(),await this.onDisconnect()}async handleRequest(t){try{let e,n=null;const r=await this.getWalletConnector();switch(t.method){case"wc_killSession":await this.close(),n=null;break;case"eth_accounts":n=r.accounts;break;case"eth_coinbase":n=r.accounts[0];break;case"eth_chainId":case"net_version":n=r.chainId;break;case"eth_uninstallFilter":this.sendAsync(t,(t=>t)),n=!0;break;default:e=await this.handleOtherRequests(t)}return e||this.formatResponse(t,n)}catch(e){throw this.emit("error",e),e}}async handleOtherRequests(t){if(!ht.includes(t.method)&&t.method.startsWith("eth_"))return this.handleReadRequests(t);const e=await this.getWalletConnector(),n=await e.sendCustomRequest(t);return this.formatResponse(t,n)}async handleReadRequests(t){if(!this.http){const t=new Error("HTTP Connection not available");throw this.emit("error",t),t}return this.http.send(t)}formatResponse(t,e){return{id:t.id,jsonrpc:t.jsonrpc,result:e}}getWalletConnector(t={}){const{disableSessionCreation:e=!1}=t;return new Promise(((t,n)=>{const r=this.wc;this.isConnecting?this.onConnect((e=>t(e))):r.connected||e?(this.connected||(this.connected=!0,this.updateState(r.session)),t(r)):(this.isConnecting=!0,r.on("modal_closed",(()=>{n(new Error("User closed modal"))})),r.createSession({chainId:this.chainId}).then((()=>{r.on("connect",((e,o)=>{if(e)return this.isConnecting=!1,n(e);this.isConnecting=!1,this.connected=!0,o&&this.updateState(o.params[0]),this.emit("connect"),this.triggerConnect(r),t(r)}))})).catch((t=>{this.isConnecting=!1,n(t)})))}))}async subscribeWalletConnector(){const t=await this.getWalletConnector();t.on("disconnect",(t=>{t?this.emit("error",t):this.onDisconnect()})),t.on("session_update",((t,e)=>{t?this.emit("error",t):this.updateState(e.params[0])}))}async onDisconnect(){await this.stop(),this.emit("close",1e3,"Connection closed"),this.emit("disconnect",1e3,"Connection disconnected"),this.connected=!1}async updateState(t){const{accounts:e,chainId:n,networkId:r,rpcUrl:o}=t;(!this.accounts||e&&this.accounts!==e)&&(this.accounts=e,this.emit("accountsChanged",e)),(!this.chainId||n&&this.chainId!==n)&&(this.chainId=n,this.emit("chainChanged",n)),(!this.networkId||r&&this.networkId!==r)&&(this.networkId=r,this.emit("networkChanged",r)),this.updateRpcUrl(this.chainId,o||"")}updateRpcUrl(t,e=""){const n={infuraId:this.infuraId,custom:this.rpc||void 0};(e=e||Ne(t,n))?(this.rpcUrl=e,this.updateHttpConnection()):this.emit("error",new Error(`No RPC Url available for chainId: ${t}`))}updateHttpConnection(){this.rpcUrl&&(this.http=new _s(this.rpcUrl),this.http.on("payload",(t=>this.emit("payload",t))),this.http.on("error",(t=>this.emit("error",t))))}sendAsyncPromise(t,e){return new Promise(((n,r)=>{this.sendAsync({id:Ae(),jsonrpc:"2.0",method:t,params:e||[]},((t,e)=>{t?r(t):n(e.result)}))}))}initialize(){this.updateRpcUrl(this.chainId),this.addProvider(new ys({eth_hashrate:"0x00",eth_mining:!1,eth_syncing:!0,net_listening:!0,web3_clientVersion:"WalletConnect/v1.x.x/javascript"})),this.addProvider(new ws),this.addProvider(new ks),this.addProvider(new bs),this.addProvider(new xs),this.addProvider(new Ms(this.configWallet())),this.addProvider({handleRequest:async(t,e,n)=>{try{const{error:e,result:r}=await this.handleRequest(t);n(e,r)}catch(r){n(r)}},setEngine:t=>t})}configWallet(){return{getAccounts:async t=>{try{const e=(await this.getWalletConnector()).accounts;e&&e.length?t(null,e):t(new Error("Failed to get accounts"))}catch(e){t(e)}},processMessage:async(t,e)=>{try{const n=await this.getWalletConnector();e(null,await n.signMessage([t.from,t.data]))}catch(n){e(n)}},processPersonalMessage:async(t,e)=>{try{const n=await this.getWalletConnector();e(null,await n.signPersonalMessage([t.data,t.from]))}catch(n){e(n)}},processSignTransaction:async(t,e)=>{try{const n=await this.getWalletConnector();e(null,await n.signTransaction(t))}catch(n){e(n)}},processTransaction:async(t,e)=>{try{const n=await this.getWalletConnector();e(null,await n.sendTransaction(t))}catch(n){e(n)}},processTypedMessage:async(t,e)=>{try{const n=await this.getWalletConnector();e(null,await n.signTypedData([t.from,t.data]))}catch(n){e(n)}}}}}export{Cs as default};
